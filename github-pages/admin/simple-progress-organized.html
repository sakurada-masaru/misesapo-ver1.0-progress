<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒŸã‚»ã‚µãƒãƒãƒ¼ã‚¿ãƒ«</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <style>
        /*
         ========================================
           ğŸ“‹ CSSå¤‰æ•°ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ï¼ˆã‚«ãƒ†ã‚´ãƒªåˆ¥ï¼‰
           èª°ãŒè¦‹ã¦ã‚‚ã™ãæŠŠæ¡ã§ãã‚‹ã‚ˆã†ã«ã€ä¸»è¦ãªå¤‰æ•°ã®ç›®çš„ã¨ç¯„å›²ã‚’è¨˜è¼‰
         ========================================
         ğŸ¨ ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ (Color Palette)
           - --color-primary: ãƒ¡ã‚¤ãƒ³ã‚«ãƒ©ãƒ¼ï¼ˆãƒ”ãƒ³ã‚¯ï¼‰
           - --color-primary-hover: ãƒ›ãƒãƒ¼æ™‚ã®è‰²
           - --color-primary-light: ã‚¢ã‚¯ã‚»ãƒ³ãƒˆç”¨ã®è–„ã„è‰²ï¼ˆã‚·ãƒ£ãƒ‰ã‚¦/ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ï¼‰
           - --color-primary-shadow: æ¿ƒã„ã‚ã®ã‚·ãƒ£ãƒ‰ã‚¦è‰²
           - --color-background: èƒŒæ™¯è‰²ï¼ˆç™½ï¼‰
           - --color-background-secondary: ã‚µãƒ–èƒŒæ™¯è‰²ï¼ˆè–„ã„ã‚°ãƒ¬ãƒ¼ï¼‰
           - --color-background-card: ã‚«ãƒ¼ãƒ‰èƒŒæ™¯è‰²
           - --color-text-primary: ãƒ¡ã‚¤ãƒ³ãƒ†ã‚­ã‚¹ãƒˆè‰²
           - --color-text-secondary: ã‚µãƒ–ãƒ†ã‚­ã‚¹ãƒˆè‰²
           - --color-text-muted: è£œåŠ©ãƒ†ã‚­ã‚¹ãƒˆè‰²
           - --color-border: æ ç·šã®åŸºæœ¬è‰²
           - --color-border-light: æ ç·šã®è–„ã„è‰²
           - --color-success / --color-danger / --color-warning / --color-info: çŠ¶æ…‹è‰²

         ğŸ“ ãƒ•ã‚©ãƒ³ãƒˆè¨­å®š (Typography)
           - --font-family-primary: ãƒ•ã‚©ãƒ³ãƒˆãƒ•ã‚¡ãƒŸãƒªãƒ¼
           - --font-size-xs ï½ --font-size-4xl: ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º
           - --font-weight-normal ï½ --font-weight-bold: ãƒ•ã‚©ãƒ³ãƒˆã‚¦ã‚§ã‚¤ãƒˆ
           - --line-height-tight/normal/relaxed: è¡Œé–“

         ğŸ“ ã‚¹ãƒšãƒ¼ã‚·ãƒ³ã‚° (Spacing)
           - --spacing-xs ï½ --spacing-6xl: åŸºæœ¬ã‚¹ãƒšãƒ¼ã‚·ãƒ³ã‚°å˜ä½
           - --padding-*: ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ç”¨ãƒãƒƒãƒ—ï¼ˆspacingã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ï¼‰
           - --margin-*: ãƒãƒ¼ã‚¸ãƒ³ç”¨ãƒãƒƒãƒ—ï¼ˆspacingã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ï¼‰

         ğŸ¯ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ (Layout)
           - --container-max-width: ã‚³ãƒ³ãƒ†ãƒŠå¹…
           - --container-padding: ã‚³ãƒ³ãƒ†ãƒŠã®å·¦å³ä½™ç™½
           - --header-margin-bottom: ãƒ˜ãƒƒãƒ€ãƒ¼ä¸‹ã®ä½™ç™½
           - --section-margin-bottom: ã‚»ã‚¯ã‚·ãƒ§ãƒ³ä¸‹ã®ä½™ç™½

         ğŸ¨ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (Components)
           - ã‚«ãƒ¼ãƒ‰ç³»: --card-padding, --card-border-radius, --card-shadow, --card-border
           - ãƒœã‚¿ãƒ³ç³»: --button-padding-*, --button-border-radius, --button-font-size, --button-font-weight
           - ãƒ¢ãƒ¼ãƒ€ãƒ«ç³»: --modal-padding, --modal-border-radius, --modal-shadow, --modal-border
           - ãƒ•ã‚©ãƒ¼ãƒ ç³»: --form-input-*, --form-input-focus-*
           - ãƒ†ãƒ¼ãƒ–ãƒ«ç³»: --table-cell-padding, --table-header-bg, --table-border-color

         ğŸ“± ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–/ãƒ¬ã‚¤ãƒ¤ãƒ¼ (Responsive / Layers)
           - --breakpoint-sm/md/lg/xl/2xl: ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆ
           - --transition-fast/normal/slow: ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³é€Ÿåº¦
           - --z-*: Z-ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆmodal, fixed, tooltip ãªã©ï¼‰

         ä½¿ã„æ–¹ã®ä¾‹:
           .example {
             padding: var(--padding-lg);
             color: var(--color-text-primary);
             background: var(--color-background-card);
             box-shadow: var(--shadow-primary);
             border-radius: var(--border-radius-lg);
           }
        */
        /* ========================================
           ğŸ¨ CSSå¤‰æ•°ï¼ˆãƒ«ãƒ¼ãƒˆè¨­å®šï¼‰
           ======================================== */
        :root {
            /* ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ */
            --color-primary: #FF679C;
            --color-primary-hover: #FF4081;
            --color-primary-light: rgba(255, 103, 156, 0.1);
            --color-primary-shadow: rgba(255, 103, 156, 0.2);
            --color-primary-border: rgba(255, 103, 156, 0.3);
            
            --color-background: #ffffff;
            --color-background-secondary: #fafafa;
            --color-background-card: #ffffff;
            
            --color-text-primary: #333333;
            --color-text-secondary: #6b7280;
            --color-text-muted: #9ca3af;
            
            --color-border: #e5e7eb;
            --color-border-light: #f0f0f0;
            
            --color-success: #10b981;
            --color-success-hover: #059669;
            --color-danger: #ef4444;
            --color-danger-hover: #dc2626;
            --color-warning: #f59e0b;
            --color-info: #3b82f6;
            
            /* ãƒ•ã‚©ãƒ³ãƒˆè¨­å®š */
            --font-family-primary: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            --font-size-xs: 0.75rem;    /* 12px */
            --font-size-sm: 0.875rem;   /* 14px */
            --font-size-base: 1rem;     /* 16px */
            --font-size-lg: 1.125rem;   /* 18px */
            --font-size-xl: 1.25rem;    /* 20px */
            --font-size-2xl: 1.5rem;    /* 24px */
            --font-size-3xl: 2rem;      /* 32px */
            --font-size-4xl: 2.5rem;    /* 40px */
            
            --font-weight-normal: 400;
            --font-weight-medium: 500;
            --font-weight-semibold: 600;
            --font-weight-bold: 700;
            
            --line-height-tight: 1.25;
            --line-height-normal: 1.5;
            --line-height-relaxed: 1.75;
            
            /* ã‚¹ãƒšãƒ¼ã‚·ãƒ³ã‚° */
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 12px;
            --spacing-lg: 16px;
            --spacing-xl: 20px;
            --spacing-2xl: 24px;
            --spacing-3xl: 32px;
            --spacing-4xl: 40px;
            --spacing-5xl: 48px;
            --spacing-6xl: 64px;
            
            /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚° */
            --padding-xs: var(--spacing-xs);
            --padding-sm: var(--spacing-sm);
            --padding-md: var(--spacing-md);
            --padding-lg: var(--spacing-lg);
            --padding-xl: var(--spacing-xl);
            --padding-2xl: var(--spacing-2xl);
            --padding-3xl: var(--spacing-3xl);
            
            /* ãƒãƒ¼ã‚¸ãƒ³ */
            --margin-xs: var(--spacing-xs);
            --margin-sm: var(--spacing-sm);
            --margin-md: var(--spacing-md);
            --margin-lg: var(--spacing-lg);
            --margin-xl: var(--spacing-xl);
            --margin-2xl: var(--spacing-2xl);
            --margin-3xl: var(--spacing-3xl);
            --margin-4xl: var(--spacing-4xl);
            
            /* ãƒœãƒ¼ãƒ€ãƒ¼ */
            --border-width-thin: 1px;
            --border-width-medium: 2px;
            --border-width-thick: 3px;
            
            --border-radius-sm: 4px;
            --border-radius-md: 6px;
            --border-radius-lg: 8px;
            --border-radius-xl: 10px;
            --border-radius-2xl: 12px;
            --border-radius-full: 50%;
            
            /* ã‚·ãƒ£ãƒ‰ã‚¦ */
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 2px 4px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 4px 8px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 8px 16px rgba(0, 0, 0, 0.1);
            --shadow-primary: 0 2px 8px var(--color-primary-light);
            --shadow-primary-lg: 0 4px 16px var(--color-primary-shadow);
            
            /* ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
            --container-max-width: 100%;
            --container-padding: var(--padding-xl);
            
            --header-height: 64px;
            --header-margin-bottom: var(--margin-4xl);
            --section-margin-bottom: var(--margin-3xl);
            
            /* ãƒ†ãƒ¼ãƒ–ãƒ« */
            --table-cell-padding: var(--padding-md);
            --table-header-bg: var(--color-background-secondary);
            --table-border-color: var(--color-border);
            
            /* ã‚«ãƒ¼ãƒ‰ */
            --card-padding: var(--padding-xl);
            --card-border-radius: var(--border-radius-lg);
            --card-shadow: var(--shadow-primary);
            --card-border: var(--border-width-thin) solid var(--color-border-light);
            
            /* ãƒœã‚¿ãƒ³ */
            --button-padding-sm: var(--padding-sm) var(--padding-md);
            --button-padding-md: var(--padding-md) var(--padding-lg);
            --button-padding-lg: var(--padding-md) var(--padding-2xl);
            --button-border-radius: var(--border-radius-md);
            --button-font-size: var(--font-size-base);
            --button-font-weight: var(--font-weight-medium);
            
            /* ãƒ¢ãƒ¼ãƒ€ãƒ« */
            --modal-padding: var(--padding-xl);
            --modal-border-radius: var(--border-radius-lg);
            --modal-shadow: var(--shadow-primary-lg);
            --modal-border: var(--border-width-thin) solid var(--color-border-light);
            
            /* ãƒ•ã‚©ãƒ¼ãƒ  */
            --form-input-padding: var(--padding-sm) var(--padding-md);
            --form-input-border-radius: var(--border-radius-sm);
            --form-input-border: var(--border-width-thin) solid var(--color-border);
            --form-input-focus-border: var(--border-width-thin) solid var(--color-primary);
            --form-input-focus-shadow: 0 0 0 3px var(--color-primary-light);
            
            /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆ */
            --breakpoint-sm: 640px;
            --breakpoint-md: 768px;
            --breakpoint-lg: 1024px;
            --breakpoint-xl: 1280px;
            --breakpoint-2xl: 1536px;
            
            /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
            --transition-fast: 0.15s ease;
            --transition-normal: 0.3s ease;
            --transition-slow: 0.5s ease;
            
            /* Z-ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ */
            --z-dropdown: 1000;
            --z-sticky: 1020;
            --z-fixed: 1030;
            --z-modal-backdrop: 1040;
            --z-modal: 1050;
            --z-popover: 1060;
            --z-tooltip: 1070;
        }

        /* ========================================
           ğŸ¨ åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« (Basic Styles)
           ======================================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family-primary);
            background-color: var(--color-background);
            color: var(--color-text-primary);
            line-height: var(--line-height-normal);
        }

        /* ========================================
           ğŸ“ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ (Layout)
           ======================================== */
        .container {
            max-width: var(--container-max-width);
            margin: 0;
            padding: var(--container-padding);
            background-color: var(--color-background);
        }

        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--header-margin-bottom);
            position: relative;
            height: var(--header-height);
            padding: var(--spacing-sm) 0;
        }

        /* åŒºåˆ‡ã‚Šç·šã¯ä¸è¦ã«ãªã£ãŸãŸã‚å‰Šé™¤ */

        .header-left {
            display: flex;
            align-items: center;
            gap: var(--spacing-lg);
        }

        .header-menu {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .header-actions .btn {
            padding: var(--padding-sm);
            border-radius: var(--border-radius-md);
            transition: all var(--transition-normal);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            min-width: 32px;
            height: 32px;
            justify-content: center;
        }

        .header-actions .btn.active {
            background: var(--color-primary);
            color: white;
            padding: var(--padding-sm) var(--padding-md);
            min-width: auto;
        }

        .header-actions .btn:not(.active) {
            background: var(--color-background-secondary);
            color: var(--color-text-secondary);
        }

        .header-actions .btn:hover {
            opacity: 0.8;
        }

        /* ã‚»ã‚¯ã‚·ãƒ§ãƒ³åŒºåˆ‡ã‚Šç·š */
        .section-separator {
            width: 100%;
            height: 5px;
            background: var(--color-primary-border);
            margin: 0 0 var(--spacing-lg) 0;
        }

        .logo {
            width: 60px;
            height: 60px;
            object-fit: contain;
            flex-shrink: 0;
        }

        .header-text {
            text-align: left;
        }

        .header-text h1 {
            margin: 0;
            font-size: var(--font-size-2xl);
            font-weight: var(--font-weight-bold);
            color: var(--color-text-primary);
        }

        .header-text p {
            margin: var(--spacing-xs) 0 0 0;
            font-size: var(--font-size-lg);
            color: var(--color-text-secondary);
        }

        /* ========================================
           ğŸ·ï¸ ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ (Header Menu)
           ======================================== */
        .header-menu .tab {
            padding: var(--padding-sm) var(--padding-lg);
            background: none;
            border: none;
            cursor: pointer;
            font-size: var(--font-size-base);
            color: var(--color-text-secondary);
            border-radius: var(--border-radius-md);
            transition: all var(--transition-normal);
            text-decoration: none;
            display: inline-block;
        }

        .header-menu .tab.active {
            color: var(--color-primary);
            background: var(--color-primary-light);
            font-weight: var(--font-weight-semibold);
        }

        .header-menu .tab:hover {
            color: var(--color-primary);
            background: var(--color-primary-light);
        }

        /* ========================================
           ğŸ“Š çµ±è¨ˆã‚«ãƒ¼ãƒ‰ (Statistics Cards)
           ======================================== */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-xl);
            margin-bottom: var(--margin-3xl);
        }

        .stat-card {
            background: var(--color-background-card);
            padding: var(--card-padding);
            border-radius: var(--card-border-radius);
            box-shadow: var(--card-shadow);
            text-align: center;
            border: var(--card-border);
        }

        .stat-card h3 {
            font-size: var(--font-size-3xl);
            color: var(--color-primary);
            margin-bottom: var(--spacing-sm);
        }

        .stat-card p {
            color: var(--color-text-secondary);
            font-size: var(--font-size-sm);
        }

        /* ========================================
           ğŸ“ˆ ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ (Progress Bar)
           ======================================== */
        .progress-container {
            background: var(--color-background-card);
            padding: var(--card-padding);
            border-radius: var(--card-border-radius);
            box-shadow: var(--card-shadow);
            margin-bottom: var(--margin-3xl);
            border: var(--card-border);
        }

        .progress-bar {
            width: 100%;
            height: var(--spacing-xl);
            background: var(--color-border);
            border-radius: var(--border-radius-xl);
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--color-primary), var(--color-primary-hover));
            transition: width var(--transition-normal);
        }

        /* ========================================
           ğŸ›ï¸ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« (Controls)
           ======================================== */
        .controls-container {
            display: flex;
            align-items: center;
            margin-bottom: var(--margin-3xl);
            gap: var(--spacing-xl);
            flex-wrap: wrap;
        }

        .add-button {
            background: var(--color-primary);
            color: white;
            border: none;
            padding: var(--button-padding-lg);
            border-radius: var(--button-border-radius);
            cursor: pointer;
            font-size: var(--button-font-size);
            font-weight: var(--button-font-weight);
            transition: background var(--transition-normal);
        }

        .add-button:hover {
            background: var(--color-primary-hover);
        }

        .download-button, .upload-button, .category-button {
            background: none;
            border: none;
            padding: var(--padding-sm);
            cursor: pointer;
            transition: opacity var(--transition-normal);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: var(--spacing-md);
        }

        .download-button:hover, .upload-button:hover, .category-button:hover {
            opacity: 0.7;
        }

        /* ========================================
           ğŸ“‹ ã‚«ãƒ†ã‚´ãƒªã‚»ã‚¯ã‚·ãƒ§ãƒ³ (Category Sections)
           ======================================== */
        .category-section {
            margin-bottom: var(--margin-3xl);
            background: var(--color-background-card);
            border-radius: var(--card-border-radius);
            box-shadow: var(--card-shadow);
            border: var(--card-border);
            overflow: hidden;
        }

        .category-header {
            background: var(--color-primary);
            padding: var(--padding-lg);
            border-bottom: var(--border-width-thin) solid var(--color-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: var(--spacing-md);
        }

        .category-header h3 {
            color: white;
            font-size: var(--font-size-xl);
            font-weight: var(--font-weight-semibold);
            margin: 0;
        }

        .category-stats {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-md);
            align-items: center;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: var(--padding-xs) var(--padding-sm);
            border-radius: var(--border-radius-sm);
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-medium);
            white-space: nowrap;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: var(--spacing-md);
                text-align: center;
                height: auto;
                padding: var(--spacing-lg) 0;
            }

            .header-left {
                justify-content: center;
                flex-wrap: wrap;
                gap: var(--spacing-md);
            }

            .header-menu, .header-actions {
                justify-content: center;
            }

            .logo {
                width: 50px;
                height: 50px;
            }

            .header-text h1 {
                font-size: var(--font-size-2xl);
            }

            .header-text p {
                font-size: var(--font-size-md);
            }
        }
        .table {
            width: 100%;
            border-collapse: collapse;
            background: var(--color-background-card);
            border-radius: var(--card-border-radius);
            overflow: hidden;
            box-shadow: var(--card-shadow);
            margin-bottom: var(--spacing-xl);
            border: var(--border-width-thin) solid var(--color-primary-border);
        }

        .table th, .table td {
            padding: var(--table-cell-padding);
            text-align: left;
            border-bottom: var(--border-width-thin) solid var(--color-primary-border);
        }

        .table th {
            background: var(--table-header-bg);
            font-weight: var(--font-weight-semibold);
            color: var(--color-text-primary);
        }

        .table td {
            vertical-align: middle;
        }

        /* ãƒ†ãƒ¼ãƒ–ãƒ«åˆ—å¹…ã®æœ€é©åŒ– */
        .table th:nth-child(1), .table td:nth-child(1) { width: 18% !important; } /* ãƒšãƒ¼ã‚¸å */
        .table th:nth-child(2), .table td:nth-child(2) { width: 15% !important; } /* URL */
        .table th:nth-child(3), .table td:nth-child(3) { width: 5% !important; } /* PCã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ */
        .table th:nth-child(4), .table td:nth-child(4) { width: 5% !important; } /* SPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ */
        .table th:nth-child(5), .table td:nth-child(5) { width: 10% !important; text-align: center; }  /* æ¥­å‹™æ‹…å½“ */
        .table th:nth-child(6), .table td:nth-child(6) { width: 30% !important; } /* æ©Ÿèƒ½ */
        .table th:nth-child(7), .table td:nth-child(7) { width: 10% !important; } /* æœ€çµ‚æ›´æ–°æ—¥ */
        .table th:nth-child(8), .table td:nth-child(8) { width: 6% !important; }  /* æ“ä½œ */

        /* ========================================
           ğŸ¨ ãƒœã‚¿ãƒ³ (Buttons)
           ======================================== */
        .btn {
            padding: var(--button-padding-sm);
            border: none;
            border-radius: var(--button-border-radius);
            cursor: pointer;
            font-size: var(--font-size-sm);
            font-weight: var(--button-font-weight);
            transition: all var(--transition-normal);
        }

        /* ãƒ†ãƒ¼ãƒ–ãƒ«å†…æ“ä½œãƒœã‚¿ãƒ³ã®æœ€é©åŒ– */
        .table .btn {
            padding: var(--padding-xs) var(--padding-sm);
            font-size: var(--font-size-xs);
            min-width: 50px;
            margin: 0 var(--spacing-xs);
        }

        .table .btn:first-child {
            margin-left: 0;
        }

        .table .btn:last-child {
            margin-right: 0;
        }

        /* æ“ä½œåˆ—ã®ã‚³ãƒ³ãƒ†ãƒŠæœ€é©åŒ– */
        .table td:last-child {
            text-align: center;
            vertical-align: middle;
            white-space: nowrap;
        }

        .table td:last-child .btn {
            display: inline-block;
            vertical-align: middle;
        }

        .btn-edit {
            background: var(--color-primary);
            color: white;
        }

        .btn-edit:hover {
            background: var(--color-primary-hover);
        }

        .btn-delete {
            background: var(--color-danger);
            color: white;
        }

        .btn-delete:hover {
            background: var(--color-danger-hover);
        }

        .btn-save {
            background: var(--color-success);
            color: white;
        }

        .btn-save:hover {
            background: var(--color-success-hover);
        }

        .btn-cancel {
            background: var(--color-text-secondary);
            color: white;
        }

        .btn-cancel:hover {
            background: var(--color-text-muted);
        }

        /* ========================================
           ğŸªŸ ãƒ¢ãƒ¼ãƒ€ãƒ« (Modals)
           ======================================== */
        .modal {
            display: none;
            position: fixed;
            z-index: var(--z-modal);
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: var(--color-background-card);
            margin: 5% auto;
            padding: var(--modal-padding);
            border-radius: var(--modal-border-radius);
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: var(--modal-shadow);
            border: var(--modal-border);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-xl);
            padding-bottom: var(--spacing-md);
            border-bottom: var(--border-width-thin) solid var(--color-border);
        }

        .modal-header h2 {
            color: var(--color-text-primary);
        }

        .close {
            color: var(--color-text-muted);
            font-size: var(--font-size-4xl);
            font-weight: var(--font-weight-bold);
            cursor: pointer;
        }

        .close:hover {
            color: var(--color-text-primary);
        }

        .form-group {
            margin-bottom: var(--spacing-lg);
        }

        .form-group label {
            display: block;
            margin-bottom: var(--spacing-xs);
            font-weight: var(--font-weight-medium);
            color: var(--color-text-primary);
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: var(--form-input-padding);
            border: var(--form-input-border);
            border-radius: var(--form-input-border-radius);
            font-size: var(--font-size-base);
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border: var(--form-input-focus-border);
            box-shadow: var(--form-input-focus-shadow);
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: var(--spacing-md);
            margin-top: var(--spacing-xl);
            padding-top: var(--spacing-xl);
            border-top: var(--border-width-thin) solid var(--color-border);
        }

        /* ========================================
           ğŸ“± ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– (Responsive)
           ======================================== */
        @media (max-width: 768px) {
            .container {
                padding: var(--spacing-md);
                padding-bottom: 80px;
            }
            
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: var(--spacing-md);
            }
            
            .stat-card {
                padding: var(--spacing-lg);
            }
            
            .stat-card h3 {
                font-size: var(--font-size-2xl);
            }
            
            .table {
                font-size: var(--font-size-sm);
            }
            
            .table th, .table td {
                padding: var(--spacing-sm) var(--spacing-xs);
                vertical-align: middle;
            }
            
            /* ãƒ¢ãƒã‚¤ãƒ«ã§ã®æ“ä½œãƒœã‚¿ãƒ³æœ€é©åŒ– */
            .table .btn {
                padding: var(--spacing-xs);
                font-size: var(--font-size-xs);
                min-width: 40px;
                margin: 0 var(--spacing-xs);
            }
            
            /* ãƒ¢ãƒã‚¤ãƒ«ã§ã®æ“ä½œåˆ—æœ€é©åŒ– */
            .table td:last-child {
                text-align: center;
                padding: var(--spacing-xs);
            }
            
            .modal-content {
                margin: 10% auto;
                width: 95%;
                padding: var(--spacing-lg);
            }
        }

        /* ========================================
           ğŸ“± ãƒ¢ãƒã‚¤ãƒ«ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ (Mobile Navigation)
           ======================================== */
        .mobile-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--color-background-card);
            border-top: var(--border-width-thin) solid var(--color-border-light);
            display: none;
            z-index: var(--z-fixed);
            box-shadow: 0 -2px 8px var(--color-primary-light);
        }

        .mobile-nav-content {
            display: flex;
            justify-content: space-around;
            padding: var(--spacing-md) 0;
        }

        .mobile-nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--color-text-secondary);
            font-size: var(--font-size-xs);
        }

        .mobile-nav-item.active {
            color: var(--color-primary);
        }

        .mobile-nav-item img {
            width: var(--spacing-2xl);
            height: var(--spacing-2xl);
            margin-bottom: var(--spacing-xs);
        }

        @media (max-width: 768px) {
            .mobile-nav {
                display: block;
            }
        }

        /* ========================================
           ğŸ¯ ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ (Utilities)
           ======================================== */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .text-right {
            text-align: right;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        .mt-20 {
            margin-top: 20px;
        }
    </style>
</head>

<body>
    <!-- ========================================
         ğŸ  ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ (Main Container)
         ======================================== -->
    <div class="container">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <div class="header">
            <div class="header-left">
                <img src="../images/logo_144x144.png" alt="ãƒŸã‚»ã‚µãƒãƒ­ã‚´" class="logo">
                <div class="header-text">
                    <h1>ãƒŸã‚»ã‚µãƒãƒãƒ¼ã‚¿ãƒ«</h1>
                    <p>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé€²æ—ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </p>
                </div>
                <div class="header-menu">
                    <button class="tab active" onclick="showTab('progress')">é€²æ—ç®¡ç†</button>
                    <a href="task-market.html" class="tab">ã‚¿ã‚¹ã‚¯ãƒãƒ¼ã‚±ãƒƒãƒˆ</a>
                </div>
            </div>

            <div class="header-actions">
                <button class="btn active" id="statsToggle" onclick="toggleStats()" title="çµ±è¨ˆã‚«ãƒ¼ãƒ‰ã®è¡¨ç¤ºãƒ»éè¡¨ç¤º">
                    <img src="../images/çµ±è¨ˆ.svg" alt="çµ±è¨ˆ" style="width: 16px; height: 16px;">
                    <span class="btn-label">çµ±è¨ˆã‚«ãƒ¼ãƒ‰</span>
                </button>
                <button class="btn active" id="progressToggle" onclick="toggleProgress()" title="å®Œæˆç‡ã®è¡¨ç¤ºãƒ»éè¡¨ç¤º">
                    <img src="../images/å®Œæˆç‡.svg" alt="å®Œæˆç‡" style="width: 16px; height: 16px;">
                    <span class="btn-label">å®Œæˆç‡</span>
                </button>
            </div>
        </div>

        <!-- åŒºåˆ‡ã‚Šç·š -->
        <div class="section-separator"></div>

        <!-- ã‚¢ãƒ©ãƒ¼ãƒˆ -->
        <div id="alerts"></div>

        <!-- é€²æ—ç®¡ç†ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
        <div id="progress-view" class="tab-content">
            <!-- çµ±è¨ˆæƒ…å ± -->
            <div class="stats">
                <div class="stat-card">
                    <h3 id="completedCount">0</h3>
                    <p>å®Œäº†</p>
                </div>
                <div class="stat-card">
                    <h3 id="spNotCompletedCount">0</h3>
                    <p>SPæœªå¯¾å¿œ</p>
                </div>
                <div class="stat-card">
                    <h3 id="inProgressCount">0</h3>
                    <p>é€²è¡Œä¸­</p>
                </div>
                <div class="stat-card">
                    <h3 id="pendingCount">0</h3>
                    <p>æœªç€æ‰‹</p>
                </div>
                <div class="stat-card">
                    <h3 id="waitingCount">0</h3>
                    <p>å¾…æ©Ÿä¸­</p>
                </div>
            </div>

            <!-- å®Œæˆç‡ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ -->
            <div class="progress-container">
                <h3>å®Œæˆç‡</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
                <p id="progressText" class="text-center mt-20">0% (0/0)</p>
            </div>

            <!-- æ–°è¦è¿½åŠ ãƒœã‚¿ãƒ³ã¨ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ -->
            <div class="controls-container">
                <button class="add-button" onclick="openAddModal()">æ–°è¦é …ç›®ã‚’è¿½åŠ </button>
                
                <div style="display: flex; align-items: center; gap: 10px;">
                    <label for="categoryFilter">ã‚«ãƒ†ã‚´ãƒª:</label>
                    <select id="categoryFilter" onchange="filterByCategory()">
                        <option value="">ã™ã¹ã¦</option>
                    </select>
                    
                    <label for="statusFilter">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:</label>
                    <select id="statusFilter" onchange="filterByStatus()">
                        <option value="">ã™ã¹ã¦</option>
                        <option value="completed">å®Œäº†</option>
                        <option value="in-progress">é€²è¡Œä¸­</option>
                        <option value="pending">æœªç€æ‰‹</option>
                        <option value="waiting">å¾…æ©Ÿä¸­</option>
                    </select>
                </div>

                <button class="download-button" onclick="downloadCSV()" title="ãƒªã‚¹ãƒˆãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰">
                    <img src="../images/ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰.svg" alt="ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰" style="width: 20px; height: 20px;">
                </button>
                
                <button class="upload-button" onclick="openUploadModal()" title="ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰">
                    <img src="../images/ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰.svg" alt="ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰" style="width: 20px; height: 20px;">
                </button>
                
                <button class="category-button" onclick="openCategoryModal()" title="ã‚«ãƒ†ã‚´ãƒªç®¡ç†">
                    <img src="../images/ã‚®ã‚¢ã‚¢ã‚¤ã‚³ãƒ³.svg" alt="ã‚«ãƒ†ã‚´ãƒªç®¡ç†" style="width: 20px; height: 20px;">
                </button>
            </div>

            <!-- ã‚«ãƒ†ã‚´ãƒªã”ã¨ã®ãƒ†ãƒ¼ãƒ–ãƒ« -->
            <div id="categorySections">
                <!-- ã‚«ãƒ†ã‚´ãƒªã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
            </div>
        </div>
    </div>

    <!-- ========================================
         ğŸªŸ ãƒ¢ãƒ¼ãƒ€ãƒ«ç¾¤ (Modals)
         ======================================== -->
    
    <!-- æ–°è¦è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="addModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>æ–°è¦é …ç›®ã‚’è¿½åŠ </h2>
                <span class="close" onclick="closeAddModal()">&times;</span>
            </div>
            <form id="addForm" novalidate>
                <div class="form-group">
                    <label for="addCategory">ã‚«ãƒ†ã‚´ãƒª:</label>
                    <select id="addCategory" onchange="handleCategoryChange(this)">
                        <option value="">ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠ</option>
                        <option value="ãƒ¡ã‚¤ãƒ³">ãƒ¡ã‚¤ãƒ³</option>
                        <option value="èªè¨¼">èªè¨¼</option>
                        <option value="ç™»éŒ²">ç™»éŒ²</option>
                        <option value="ã‚µãƒãƒ¼ãƒˆ">ã‚µãƒãƒ¼ãƒˆ</option>
                        <option value="ãƒã‚¤ãƒšãƒ¼ã‚¸">ãƒã‚¤ãƒšãƒ¼ã‚¸</option>
                        <option value="ç®¡ç†">ç®¡ç†</option>
                        <option value="Eã‚³ãƒãƒ¼ã‚¹">Eã‚³ãƒãƒ¼ã‚¹</option>
                        <option value="__ADD_CATEGORY__">+ ã‚«ãƒ†ã‚´ãƒªã‚’è¿½åŠ ã™ã‚‹</option>
                    </select>
                    <div id="addNewCategoryGroup" class="form-group" style="display: none;">
                        <label for="addNewCategoryName">æ–°ã—ã„ã‚«ãƒ†ã‚´ãƒªå:</label>
                        <input type="text" id="addNewCategoryName" placeholder="ã‚«ãƒ†ã‚´ãƒªåã‚’å…¥åŠ›" onblur="handleNewCategoryName(this)">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="addPageName">ãƒšãƒ¼ã‚¸å:</label>
                    <input type="text" id="addPageName" placeholder="ãƒšãƒ¼ã‚¸åã‚’å…¥åŠ›ï¼ˆç©ºç™½ã®å ´åˆã¯ã€Œæœªè¨­å®šã€ï¼‰">
                </div>
                
                <div class="form-group">
                    <label for="addUrl">URL:</label>
                    <input type="text" id="addUrl" placeholder="ä»»æ„ã®æ–‡å­—åˆ—OKï¼ˆç©ºç™½å¯ï¼‰">
                </div>
                
                <div class="form-group">
                    <label for="addPCStatus">PCç‰ˆé–‹ç™ºçŠ¶æ³:</label>
                    <select id="addPCStatus">
                        <option value="pending">æœªç€æ‰‹</option>
                        <option value="in-progress">é€²è¡Œä¸­</option>
                        <option value="completed">å®Œäº†</option>
                        <option value="waiting">å¾…æ©Ÿä¸­</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="addSPStatus">SPç‰ˆé–‹ç™ºçŠ¶æ³:</label>
                    <select id="addSPStatus">
                        <option value="pending">æœªç€æ‰‹</option>
                        <option value="in-progress">é€²è¡Œä¸­</option>
                        <option value="completed">å®Œäº†</option>
                        <option value="waiting">å¾…æ©Ÿä¸­</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="addAssignee">æ¥­å‹™æ‹…å½“:</label>
                    <select id="addAssignee">
                        <option value="">æ‹…å½“è€…ã‚’é¸æŠ</option>
                        <option value="ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼">ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼</option>
                        <option value="ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰">ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰</option>
                        <option value="ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰">ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰</option>
                        <option value="ãƒ¡ãƒ‡ã‚£ã‚¢">ãƒ¡ãƒ‡ã‚£ã‚¢</option>
                        <option value="ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³">ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="addFunction">æ©Ÿèƒ½:</label>
                    <textarea id="addFunction" rows="3" placeholder="æ©Ÿèƒ½ã®è©³ç´°ã‚’å…¥åŠ›"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="addLastUpdated">æœ€çµ‚æ›´æ–°æ—¥:</label>
                    <input type="date" id="addLastUpdated">
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-cancel" onclick="closeAddModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                    <button type="submit" class="btn btn-save">è¿½åŠ </button>
                </div>
            </form>
        </div>
    </div>

    <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>é …ç›®ã‚’ç·¨é›†</h2>
                <span class="close" onclick="closeEditModal()">&times;</span>
            </div>
            <form id="editForm" novalidate>
                <input type="hidden" id="editId">
                
                <div class="form-group">
                    <label for="editCategory">ã‚«ãƒ†ã‚´ãƒª:</label>
                    <select id="editCategory" onchange="handleCategoryChange(this)">
                        <option value="">ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠ</option>
                        <option value="ãƒ¡ã‚¤ãƒ³">ãƒ¡ã‚¤ãƒ³</option>
                        <option value="èªè¨¼">èªè¨¼</option>
                        <option value="ç™»éŒ²">ç™»éŒ²</option>
                        <option value="ã‚µãƒãƒ¼ãƒˆ">ã‚µãƒãƒ¼ãƒˆ</option>
                        <option value="ãƒã‚¤ãƒšãƒ¼ã‚¸">ãƒã‚¤ãƒšãƒ¼ã‚¸</option>
                        <option value="ç®¡ç†">ç®¡ç†</option>
                        <option value="Eã‚³ãƒãƒ¼ã‚¹">Eã‚³ãƒãƒ¼ã‚¹</option>
                        <option value="__ADD_CATEGORY__">+ ã‚«ãƒ†ã‚´ãƒªã‚’è¿½åŠ ã™ã‚‹</option>
                    </select>
                    <div id="editNewCategoryGroup" class="form-group" style="display: none;">
                        <label for="editNewCategoryName">æ–°ã—ã„ã‚«ãƒ†ã‚´ãƒªå:</label>
                        <input type="text" id="editNewCategoryName" placeholder="ã‚«ãƒ†ã‚´ãƒªåã‚’å…¥åŠ›" onblur="handleNewCategoryName(this)">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="editPageName">ãƒšãƒ¼ã‚¸å:</label>
                    <input type="text" id="editPageName" placeholder="ãƒšãƒ¼ã‚¸åã‚’å…¥åŠ›ï¼ˆç©ºç™½ã®å ´åˆã¯ã€Œæœªè¨­å®šã€ï¼‰">
                </div>
                
                <div class="form-group">
                    <label for="editUrl">URL:</label>
                    <input type="text" id="editUrl" placeholder="ä»»æ„ã®æ–‡å­—åˆ—OKï¼ˆç©ºç™½å¯ï¼‰">
                </div>
                
                <div class="form-group">
                    <label for="editPCStatus">PCç‰ˆé–‹ç™ºçŠ¶æ³:</label>
                    <select id="editPCStatus">
                        <option value="pending">æœªç€æ‰‹</option>
                        <option value="in-progress">é€²è¡Œä¸­</option>
                        <option value="completed">å®Œäº†</option>
                        <option value="waiting">å¾…æ©Ÿä¸­</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="editSPStatus">SPç‰ˆé–‹ç™ºçŠ¶æ³:</label>
                    <select id="editSPStatus">
                        <option value="pending">æœªç€æ‰‹</option>
                        <option value="in-progress">é€²è¡Œä¸­</option>
                        <option value="completed">å®Œäº†</option>
                        <option value="waiting">å¾…æ©Ÿä¸­</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="editAssignee">æ¥­å‹™æ‹…å½“:</label>
                    <select id="editAssignee">
                        <option value="">æ‹…å½“è€…ã‚’é¸æŠ</option>
                        <option value="ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼">ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼</option>
                        <option value="ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰">ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰</option>
                        <option value="ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰">ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰</option>
                        <option value="ãƒ¡ãƒ‡ã‚£ã‚¢">ãƒ¡ãƒ‡ã‚£ã‚¢</option>
                        <option value="ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³">ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="editFunction">æ©Ÿèƒ½:</label>
                    <textarea id="editFunction" rows="3" placeholder="æ©Ÿèƒ½ã®è©³ç´°ã‚’å…¥åŠ›"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="editLastUpdated">æœ€çµ‚æ›´æ–°æ—¥:</label>
                    <input type="date" id="editLastUpdated">
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-cancel" onclick="closeEditModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                    <button type="submit" class="btn btn-save">æ›´æ–°</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="uploadModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</h2>
                <span class="close" onclick="closeUploadModal()">&times;</span>
            </div>
            <form id="uploadForm">
                <div class="form-group">
                    <label for="password">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰:</label>
                    <input type="password" id="password" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›" required>
                </div>
                <div class="form-group">
                    <label for="csvFile">CSVãƒ•ã‚¡ã‚¤ãƒ«:</label>
                    <input type="file" id="csvFile" accept=".csv" required>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-cancel" onclick="closeUploadModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                    <button type="submit" class="btn btn-save">ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ã‚«ãƒ†ã‚´ãƒªç®¡ç†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="categoryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ã‚«ãƒ†ã‚´ãƒªç®¡ç†</h2>
                <span class="close" onclick="closeCategoryModal()">&times;</span>
            </div>
            <div class="form-group">
                <label for="newCategoryName">æ–°ã—ã„ã‚«ãƒ†ã‚´ãƒªå:</label>
                <input type="text" id="newCategoryName" placeholder="ã‚«ãƒ†ã‚´ãƒªåã‚’å…¥åŠ›">
                <button type="button" class="btn btn-save" onclick="addNewCategory()">è¿½åŠ </button>
            </div>
            <div id="categoryList">
                <!-- ã‚«ãƒ†ã‚´ãƒªãƒªã‚¹ãƒˆã¯JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-cancel" onclick="closeCategoryModal()">é–‰ã˜ã‚‹</button>
            </div>
        </div>
    </div>

    <!-- ========================================
         ğŸ“± ãƒ¢ãƒã‚¤ãƒ«ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ (Mobile Navigation)
         ======================================== -->
    <div class="mobile-nav">
        <div class="mobile-nav-content">
            <a href="#" class="mobile-nav-item active" onclick="showTab('progress')">
                <img src="../images/graph.png" alt="é€²æ—ç®¡ç†">
                <span>é€²æ—</span>
            </a>
            <a href="task-market.html" class="mobile-nav-item">
                <img src="../images/TASK.png" alt="ã‚¿ã‚¹ã‚¯ãƒãƒ¼ã‚±ãƒƒãƒˆ">
                <span>ã‚¿ã‚¹ã‚¯</span>
            </a>
            <a href="#" class="mobile-nav-item" onclick="window.open('https://www.figma.com/design/example', '_blank')">
                <img src="../images/figma.png" alt="Figma">
                <span>Figma</span>
            </a>
            <a href="#" class="mobile-nav-item" onclick="window.open('https://www.mindmeister.com/example', '_blank')">
                <img src="../images/Mind.webp" alt="MindMeister">
                <span>Mind</span>
            </a>
        </div>
    </div>

    <script>
        /* ========================================
           ğŸ”§ åˆæœŸåŒ–ãƒ»è¨­å®š (Initialization & Configuration)
           ======================================== */
        
        // Firebaseè¨­å®š
        const firebaseConfig = {
            apiKey: "AIzaSyDi2_U6INLm7sb-02GsdWzDl2qaFBe8US4",
            authDomain: "misesapo-progress.firebaseapp.com",
            databaseURL: "https://misesapo-progress-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "misesapo-progress",
            storageBucket: "misesapo-progress.firebasestorage.app",
            messagingSenderId: "926808186549",
            appId: "1:926808186549:web:91ce8534877c4ecf2e28fc",
            measurementId: "G-5JS29JLL13"
        };

        // FirebaseåˆæœŸåŒ–ï¼ˆã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ä»˜ãï¼‰
        console.log('FirebaseåˆæœŸåŒ–é–‹å§‹');
        let firebaseInitialized = false;
        let db;
        
        try {
            if (!firebase.apps.length) {
                firebase.initializeApp(firebaseConfig);
                db = firebase.firestore();
                firebaseInitialized = true;
                console.log('FirebaseåˆæœŸåŒ–æˆåŠŸ');
            } else {
                db = firebase.firestore();
                firebaseInitialized = true;
                console.log('Firebaseæ—¢ã«åˆæœŸåŒ–æ¸ˆã¿');
            }
        } catch (error) {
            console.error('FirebaseåˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:', error);
            firebaseInitialized = false;
        }
        
        // Firestoreè¨­å®šï¼ˆç°¡æ½”ç‰ˆï¼‰
        if (firebaseInitialized && db) {
            // åŸºæœ¬çš„ãªè¨­å®šã®ã¿ï¼ˆè­¦å‘Šã‚’é¿ã‘ã‚‹ãŸã‚ï¼‰
            console.log('Firestoreæ¥ç¶šæº–å‚™å®Œäº†');
        }

        // èªè¨¼ãªã—ã§ã‚ªãƒ¼ãƒ—ãƒ³ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆåŒ¿åèªè¨¼ã‚’å‰Šé™¤ï¼‰
        // Firebase Firestoreã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã§ã‚ªãƒ¼ãƒ—ãƒ³ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯
        console.log('Firebaseèªè¨¼ãªã—ã§ã‚ªãƒ¼ãƒ—ãƒ³ã‚¢ã‚¯ã‚»ã‚¹è¨­å®š');
        
        /* ========================================
           ğŸ”’ Firestoreã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«è¨­å®šï¼ˆä»Šå¾Œã®èª²é¡Œï¼‰
           ========================================
           
           ç¾åœ¨ã®è¨­å®š: ã‚ªãƒ¼ãƒ—ãƒ³ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆæ¤œè¨¼ç”¨ï¼‰
           rules_version = '2';
           service cloud.firestore {
             match /databases/{database}/documents {
               match /{document=**} {
                 allow read, write: if true; // ã‚ªãƒ¼ãƒ—ãƒ³ã‚¢ã‚¯ã‚»ã‚¹
               }
             }
           }
           
           âš ï¸ æœ¬ç•ªé‹ç”¨æ™‚ã®æ¨å¥¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–:
           
           1. æœŸé–“åˆ¶é™
           - ç‰¹å®šã®æœŸé–“ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯
           - ä¾‹: allow read, write: if request.time < timestamp.date(2025, 12, 31);
           
           2. ãƒ‰ãƒ¡ã‚¤ãƒ³åˆ¶é™
           - ç‰¹å®šã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã®ã¿è¨±å¯
           - ä¾‹: allow read, write: if request.headers.origin.matches('https://yourdomain.com');
           
           3. IPåˆ¶é™
           - ç‰¹å®šã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã®ã¿è¨±å¯
           - ä¾‹: allow read, write: if request.auth != null && 
                 request.auth.token.ip_whitelist.has(request.ip);
           
           4. èªè¨¼ãƒ™ãƒ¼ã‚¹
           - Firebase Authenticationã‚’ä½¿ç”¨
           - ä¾‹: allow read, write: if request.auth != null;
           
           5. ã‚«ã‚¹ã‚¿ãƒ ãƒˆãƒ¼ã‚¯ãƒ³
           - ç‹¬è‡ªã®ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼
           - ä¾‹: allow read, write: if request.auth != null && 
                 request.auth.token.custom_claim == 'admin';
           
           6. ãƒ¬ãƒ¼ãƒˆåˆ¶é™
           - æ›¸ãè¾¼ã¿é »åº¦ã®åˆ¶é™
           - ä¾‹: allow write: if request.time > resource.data.lastWrite + duration.value(5, 's');
           
           æ¨å¥¨å®Ÿè£…ä¾‹ï¼ˆæœ¬ç•ªç”¨ï¼‰:
           rules_version = '2';
           service cloud.firestore {
             match /databases/{database}/documents {
               match /projectData/{document} {
                 allow read: if request.time < timestamp.date(2025, 12, 31) &&
                            request.headers.origin.matches('https://yourdomain.com');
                 allow write: if request.time < timestamp.date(2025, 12, 31) &&
                             request.headers.origin.matches('https://yourdomain.com') &&
                             request.time > resource.data.lastWrite + duration.value(1, 's');
               }
             }
           }
           
           æ³¨æ„äº‹é …:
           - ç¾åœ¨ã¯æ¤œè¨¼ãƒ»é–‹ç™ºç”¨ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚¢ã‚¯ã‚»ã‚¹è¨­å®š
           - æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å‰ã«å¿…ãšã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã‚’æ›´æ–°
           - å®šæœŸçš„ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»ã®å®Ÿæ–½ã‚’æ¨å¥¨
           ======================================== */

        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let projectData = {};
        let categories = ['ãƒ¡ã‚¤ãƒ³', 'èªè¨¼', 'ç™»éŒ²', 'ã‚µãƒãƒ¼ãƒˆ', 'ãƒã‚¤ãƒšãƒ¼ã‚¸', 'ç®¡ç†', 'Eã‚³ãƒãƒ¼ã‚¹'];

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†');
            await loadData();
            subscribeRealtime();
            setupEventListeners();
            
            // ã‚¨ãƒ©ãƒ¼ç›£è¦–
            window.addEventListener('error', function(e) {
                console.error('JavaScript Error:', e.error);
                console.error('Error details:', {
                    message: e.message,
                    filename: e.filename,
                    lineno: e.lineno,
                    colno: e.colno
                });
            });
            
            window.addEventListener('unhandledrejection', function(e) {
                console.error('Unhandled Promise Rejection:', e.reason);
                console.error('Promise rejection details:', {
                    reason: e.reason,
                    promise: e.promise
                });
            });
            
            // Firebaseæ¥ç¶šçŠ¶æ…‹ã®ç›£è¦–ï¼ˆèªè¨¼ãªã—ã§ã‚ªãƒ¼ãƒ—ãƒ³ã‚¢ã‚¯ã‚»ã‚¹ï¼‰
            if (firebaseInitialized && db) {
                console.log('Firebaseæ¥ç¶šçŠ¶æ…‹: èªè¨¼ãªã—ã§ã‚ªãƒ¼ãƒ—ãƒ³ã‚¢ã‚¯ã‚»ã‚¹');
            }
        });

        /* ========================================
           ğŸ“Š ãƒ‡ãƒ¼ã‚¿ç®¡ç† (Data Management)
           ======================================== */
        
        // ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿å„ªå…ˆåº¦: Firestore â†’ localStorage â†’ CSVåˆæœŸæŠ•å…¥ â†’ åŸ‹ã‚è¾¼ã¿
        async function loadData() {
            // 1) Firestore æœ€å„ªå…ˆ
            if (firebaseInitialized) {
                try {
                    const doc = await db.collection('projectData').doc('main').get();
                    if (doc.exists) {
                        projectData = doc.data();
                        console.log('Firebaseã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ:', projectData);
                        updateDisplay();
                        return;
                    }
                } catch (e) {
                    console.warn('Firebaseèª­ã¿è¾¼ã¿ã«å¤±æ•—:', e);
                }
            }

            // 2) localStorage ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
            try {
                const localData = localStorage.getItem('projectData');
                if (localData) {
                    projectData = JSON.parse(localData);
                    console.log('localStorageã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ:', projectData);
                    updateDisplay();
                    return;
                }
            } catch (e) {
                console.warn('localStorageèª­ã¿è¾¼ã¿ã«å¤±æ•—:', e);
            }

            // 3) CSV åˆå›ãƒ–ãƒ¼ãƒˆã‚¹ãƒˆãƒ©ãƒƒãƒ—ï¼ˆFirestoreã«å­˜åœ¨ã—ãªã„å ´åˆã®ã¿ï¼‰
            try {
                const res = await fetch('project-data.csv', { cache: 'no-cache' });
                if (res.ok) {
                    const csvText = await res.text();
                    projectData = parseCsvToProjectData(csvText);
                    console.log('CSVã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸï¼ˆåˆæœŸæŠ•å…¥ï¼‰:', projectData);
                    updateDisplay();
                    try {
                        await saveData();
                        console.log('CSVãƒ‡ãƒ¼ã‚¿ã‚’Firebaseã«åˆæœŸæŠ•å…¥ã—ã¾ã—ãŸ');
                    } catch (syncError) {
                        console.warn('FirebaseåˆæœŸæŠ•å…¥ã«å¤±æ•—:', syncError);
                    }
                    return;
                }
            } catch (e) {
                console.warn('CSVèª­ã¿è¾¼ã¿ã«å¤±æ•—:', e);
            }

            // 4) æœ€çµ‚ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆåŸ‹ã‚è¾¼ã¿åˆæœŸãƒ‡ãƒ¼ã‚¿ï¼‰
            console.log('ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã™');
            await initializeDefaultData();
            updateDisplay();
        }

        // Firestoreãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è³¼èª­
        function subscribeRealtime() {
            if (!firebaseInitialized || !db) return;
            try {
                window._unsubscribeProject = db.collection('projectData').doc('main').onSnapshot((doc) => {
                    if (!doc.exists) return;
                    // è‡ªåˆ†ã®ãƒšãƒ³ãƒ‡ã‚£ãƒ³ã‚°æ›¸ãè¾¼ã¿ã¯ã‚¹ã‚­ãƒƒãƒ—
                    if (doc.metadata && doc.metadata.hasPendingWrites) return;
                    const data = doc.data();
                    // å¤‰æ›´ãŒãªã‘ã‚Œã°ã‚¹ã‚­ãƒƒãƒ—
                    const before = JSON.stringify(projectData);
                    const after = JSON.stringify(data);
                    if (before === after) return;
                    projectData = data;
                    localStorage.setItem('projectData', JSON.stringify(projectData));
                    console.log('Firestoreãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ã‚’åæ˜ ');
                    updateDisplay();
                }, (err) => {
                    console.warn('ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è³¼èª­ã‚¨ãƒ©ãƒ¼:', err);
                });
            } catch (e) {
                console.warn('ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è³¼èª­ã®è¨­å®šã«å¤±æ•—:', e);
            }
        }

        // CSVæ–‡å­—åˆ— â†’ å†…éƒ¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¸å¤‰æ›
        function parseCsvToProjectData(csv) {
            const lines = csv.split('\n').filter(l => l.trim().length > 0);
            if (lines.length <= 1) return {};
            // æœŸå¾…ãƒ˜ãƒƒãƒ€ãƒ¼: ã‚«ãƒ†ã‚´ãƒª,ãƒšãƒ¼ã‚¸å,URL,ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹,æ‹…å½“è€…,æ©Ÿèƒ½,æœ€çµ‚æ›´æ–°æ—¥
            const data = {};
            for (let i = 1; i < lines.length; i++) {
                const values = lines[i].split(',');
                const rawStatus = (values[3] || '').trim();
                const toInternal = (s) => s === 'complete' ? 'completed' : (s === 'pending' ? 'in-progress' : 'pending');
                const rawAssignee = (values[4] || '').trim();
                const toAssignee = rawAssignee === 'frontend' ? 'ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰' : (rawAssignee === 'backend' ? 'ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰' : rawAssignee);
                const item = {
                    id: i.toString(),
                    category: (values[0] || 'æœªè¨­å®š').trim(),
                    pageName: (values[1] || '').trim(),
                    url: (values[2] || '').trim(),
                    pcStatus: toInternal(rawStatus),
                    spStatus: toInternal(rawStatus),
                    assignee: toAssignee,
                    function: (values[5] || '').trim(),
                    lastUpdated: (values[6] || new Date().toISOString().split('T')[0]).trim()
                };
                data[item.id] = item;
            }
            // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚«ãƒ†ã‚´ãƒªã‚‚æ›´æ–°
            categories = [...new Set(Object.values(data).map(it => it.category))];
            return data;
        }

        // åˆæœŸãƒ‡ãƒ¼ã‚¿è¨­å®šï¼ˆCSVã‹ã‚‰èª­ã¿è¾¼ã¿ï¼‰
        async function initializeDefaultData() {
            // CSVãƒ‡ãƒ¼ã‚¿ã‚’JavaScriptã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›
            const csvData = `ã‚«ãƒ†ã‚´ãƒª,ãƒšãƒ¼ã‚¸å,URL,ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹,æ‹…å½“è€…,æ©Ÿèƒ½,æœ€çµ‚æ›´æ–°æ—¥
ãƒ¡ã‚¤ãƒ³,ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸,index.html,complete,frontend,ã‚µãƒ¼ãƒ“ã‚¹ä¸€è¦§ãƒ»ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ»ã‚«ãƒ¼ãƒˆé€£æº,2025-01-27
ãƒã‚¤ãƒšãƒ¼ã‚¸ï¼šãƒ¬ãƒãƒ¼ãƒˆé–¢é€£,PC/ãƒ¬ãƒãƒ¼ãƒˆä¸€è¦§ç”»é¢,report.html,complete,frontend,å‹•çš„ãƒ¬ãƒãƒ¼ãƒˆä¸€è¦§ãƒ»ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½,2025-01-27
ãƒã‚¤ãƒšãƒ¼ã‚¸,PC/ãƒã‚¤ãƒšãƒ¼ã‚¸TOPç”»é¢,mypage.html,complete,frontend,ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ç®¡ç†TOPç”»é¢,2025-01-27
ãƒã‚¤ãƒšãƒ¼ã‚¸ï¼šãƒ¬ãƒãƒ¼ãƒˆé–¢é€£,PC/ãƒ¬ãƒãƒ¼ãƒˆå†…å®¹è©³ç´°ç”»é¢,reports/[id].html,complete,frontend,å‹•çš„ãƒ¬ãƒãƒ¼ãƒˆè©³ç´°è¡¨ç¤º,2025-01-27
èªè¨¼,PC/ã‚µã‚¤ãƒ³ã‚¤ãƒ³TOPç”»é¢,signin.html,complete,frontend,ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚µã‚¤ãƒ³ã‚¤ãƒ³ï¼ˆãƒ­ã‚°ã‚¤ãƒ³ï¼‰ç”»é¢,2025-01-27
èªè¨¼,PC/ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆæ–°è¦ç™»éŒ²ï¼‰ç”»é¢ï¼‘,signup.html,complete,frontend,ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²,2025-01-27
èªè¨¼,PC/ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆæ–°è¦ç™»éŒ²ï¼‰ç”»é¢ï¼’,signup2.html,complete,frontend,è¿½åŠ æƒ…å ±å…¥åŠ›,2025-01-27
èªè¨¼,PC/ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆæ–°è¦ç™»éŒ²ï¼‰ç”»é¢ï¼“,signup3.html,complete,frontend,æœ€çµ‚ç¢ºèª,2025-01-27
èªè¨¼,ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆ,reset-password.html,complete,frontend,ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å†è¨­å®š,2025-01-27
ç™»éŒ²,å€‹äººç™»éŒ²,registration/personal.html,complete,frontend,å€‹äººæƒ…å ±ç™»éŒ²,2025-01-27
ç™»éŒ²,å€‹äººç™»éŒ²2,registration/personal2.html,complete,frontend,è¿½åŠ æƒ…å ±å…¥åŠ›,2025-01-27
ç™»éŒ²,æ³•äººç™»éŒ²,registration/corporation.html,complete,frontend,æ³•äººæƒ…å ±ç™»éŒ²,2025-01-27
ç™»éŒ²,æ³•äººç™»éŒ²2,registration/corporation2.html,complete,frontend,è¿½åŠ æƒ…å ±å…¥åŠ›,2025-01-27
ç™»éŒ²,æ³•äººç™»éŒ²3,registration/corporation3.html,complete,frontend,æœ€çµ‚ç¢ºèª,2025-01-27
ç™»éŒ²,ç™»éŒ²å®Œäº†,registration/complete.html,complete,frontend,å®Œäº†é€šçŸ¥ãƒ»ã‚«ãƒ¼ãƒˆé€£æº,2025-01-27
ã‚µãƒãƒ¼ãƒˆ,ãŠå•ã„åˆã‚ã›å®Œäº†,inquiry/complete.html,complete,frontend,å®Œäº†é€šçŸ¥,2025-01-27
ãƒã‚¤ãƒšãƒ¼ã‚¸,PC/ãƒã‚¤ãƒšãƒ¼ã‚¸/å€‹äººæƒ…å ±ç·¨é›†ç”»é¢,mypage/info.html,complete,frontend,æƒ…å ±ç·¨é›†ãƒ»æ›´æ–°,2025-01-27
ã‚µãƒãƒ¼ãƒˆ,ãŠå•ã„åˆã‚ã›,mypage/inquiry.html,complete,frontend,ã‚µãƒãƒ¼ãƒˆå•ã„åˆã‚ã›,2025-01-27
Eã‚³ãƒãƒ¼ã‚¹,ã‚«ãƒ¼ãƒˆ,cart.html,complete,frontend,ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ã‚«ãƒ¼ãƒˆæ©Ÿèƒ½,2025-01-27
Eã‚³ãƒãƒ¼ã‚¹,ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ,checkout.html,complete,frontend,æ±ºæ¸ˆãƒ»æ³¨æ–‡å‡¦ç†,2025-01-27
Eã‚³ãƒãƒ¼ã‚¹,æ³¨æ–‡ç¢ºèª,order-confirm.html,complete,frontend,æ³¨æ–‡å†…å®¹ç¢ºèª,2025-01-27
Eã‚³ãƒãƒ¼ã‚¹,æ³¨æ–‡å®Œäº†,order-complete.html,complete,frontend,æ³¨æ–‡å®Œäº†é€šçŸ¥,2025-01-27
SPãƒãƒ¼ã‚¸ãƒ§ãƒ³,ã‚«ãƒ¼ãƒˆç”»é¢,cart.html,pending,frontend,SPç‰ˆã®ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œã‚«ãƒ¼ãƒˆç”»é¢,2025-10-28
Eã‚³ãƒãƒ¼ã‚¹,ç™ºæ³¨å±¥æ­´ç¢ºèªæ©Ÿèƒ½,ï¼Ÿï¼Ÿï¼Ÿ,unknown,backend,éå»ã®æ³¨æ–‡ã‹ã‚‰ã€æ—¥æ¯ã®æ¸…æƒè©³ç´°ãƒ»å†ç™ºæ³¨ãƒ»è«‹æ±‚æ›¸ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ»ãƒ¬ãƒãƒ¼ãƒˆã®ç¢ºèªãŒã§ãã‚‹,2025-10-28
SPãƒãƒ¼ã‚¸ãƒ§ãƒ³,ç™ºæ³¨å±¥æ­´ç¢ºèªç”»é¢,ï¼Ÿï¼Ÿï¼Ÿ,unknown,backend,SP éå»ã®æ³¨æ–‡ã‹ã‚‰ã€æ—¥æ¯ã®æ¸…æƒè©³ç´°ãƒ»å†ç™ºæ³¨ãƒ»è«‹æ±‚æ›¸ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ»ãƒ¬ãƒãƒ¼ãƒˆã®ç¢ºèªãŒã§ãã‚‹,2025-10-28
ç™»éŒ²,PC/ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰æƒ…å ±ç¢ºèªç”»é¢,ï¼Ÿï¼Ÿï¼Ÿ,unknown,frontend,ãƒã‚¤ãƒšãƒ¼ã‚¸ä¸Šã®ã€Œç™»éŒ²ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆæƒ…å ±ã‚’ç¢ºèªã™ã‚‹ç”»é¢ã€,2025-10-28
Eã‚³ãƒãƒ¼ã‚¹,ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰æ±ºæ¸ˆæ©Ÿèƒ½,ï¼Ÿï¼Ÿï¼Ÿ,unknown,backend,ã‚¯ãƒªã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰æƒ…å ±ã®ç™»éŒ²ã€æ±ºæ¸ˆãŒã§ãã‚‹æ©Ÿèƒ½ã€‚,2025-10-28
ç™»éŒ²,PC/ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰æƒ…å ±å…¥åŠ›ãƒ»ç·¨é›†ç”»é¢,ï¼Ÿï¼Ÿï¼Ÿ,unknown,frontend,ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰æƒ…å ±å…¥åŠ›ãƒ»ç·¨é›†ç”»é¢ã®å®Ÿè£…,2025-10-28
ç™»éŒ²,SP/ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰æƒ…å ±ç¢ºèªç”»é¢,ï¼Ÿï¼Ÿï¼Ÿ,unknown,backend,ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ç™»éŒ²ãƒ»ç·¨é›†æ©Ÿèƒ½ã®å®Ÿè£…,2025-10-28
SPãƒãƒ¼ã‚¸ãƒ§ãƒ³,åº—èˆ—æƒ…å ±ç·¨é›†ç”»é¢,ï¼Ÿï¼Ÿï¼Ÿ,pending,frontend,SP åº—èˆ—ï¼ˆå€‹äººï¼‰æƒ…å ±ã®ç·¨é›†ç”»é¢,2025-10-28
SPãƒãƒ¼ã‚¸ãƒ§ãƒ³,æ–°è¦åº—èˆ—æƒ…å ±ç™»éŒ²ç”»é¢,ï¼Ÿï¼Ÿï¼Ÿ,unknown,frontend,SP æ–°è¦åº—èˆ—æƒ…å ±ã‚’ç™»éŒ²ã™ã‚‹ç”»é¢,2025-10-28
SPãƒãƒ¼ã‚¸ãƒ§ãƒ³,ãŠå®¢æ§˜æƒ…å ±ï¼ˆåŸºæœ¬æƒ…å ±ï¼‰ç·¨é›†ç”»é¢,ï¼Ÿï¼Ÿï¼Ÿ,unknown,backend,ãŠå®¢æ§˜æƒ…å ±ï¼ˆåŸºæœ¬æƒ…å ±ï¼‰ç·¨é›†ã™ã‚‹ç”»é¢,2025-10-28
SPãƒãƒ¼ã‚¸ãƒ§ãƒ³,ãƒã‚¤ãƒšãƒ¼ã‚¸TOPç”»é¢,ï¼Ÿï¼Ÿï¼Ÿ,complete,frontend,2-0ã€€ãƒã‚¤ãƒšãƒ¼ã‚¸ã®SPç”»é¢,2025-10-28
SPãƒãƒ¼ã‚¸ãƒ§ãƒ³,ãƒã‚¤ãƒšãƒ¼ã‚¸ï¼šãƒ¬ãƒãƒ¼ãƒˆä¸€è¦§ç”»é¢,ï¼Ÿï¼Ÿï¼Ÿ,complete,frontend,ï¼’âˆ’ï¼‘æ¸…æƒå“¡ã‹ã‚‰ã€é€ã‚‰ã‚Œã¦ããŸã€Œæ¸…æƒãƒ¬ãƒãƒ¼ãƒˆã€ã®ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚‹ç”»é¢,2025-10-28
ãƒã‚¤ãƒšãƒ¼ã‚¸ï¼šãƒ¬ãƒãƒ¼ãƒˆé–¢é€£,SP/ãƒ¬ãƒãƒ¼ãƒˆä¸€è¦§ç”»é¢,report.html,complete,frontend,ï¼’âˆ’ï¼‘æ¸…æƒå“¡ã‹ã‚‰ã€é€ã‚‰ã‚Œã¦ããŸã€Œæ¸…æƒãƒ¬ãƒãƒ¼ãƒˆã€ã®ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚‹ç”»é¢,2025-10-28
ãƒ¡ã‚¤ãƒ³,SP/ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸,index.html,complete,frontend,ã‚µãƒ¼ãƒ“ã‚¹ä¸€è¦§ãƒ»ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ»ã‚«ãƒ¼ãƒˆé€£æº,2025-10-28
ãƒã‚¤ãƒšãƒ¼ã‚¸,SP/ãƒã‚¤ãƒšãƒ¼ã‚¸TOPç”»é¢,mypage.html,complete,frontend,2-0ã€€SPãƒã‚¤ãƒšãƒ¼ã‚¸TOPç”»é¢,2025-10-28
ãƒã‚¤ãƒšãƒ¼ã‚¸,SP/ãƒã‚¤ãƒšãƒ¼ã‚¸/å€‹äººæƒ…å ±ç·¨é›†ç”»é¢,,complete,frontend,SP/ãƒã‚¤ãƒšãƒ¼ã‚¸/å€‹äººæƒ…å ±ç·¨é›†ç”»é¢,2025-10-28
ç™»éŒ²,SP/ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰æƒ…å ±å…¥åŠ›ãƒ»ç·¨é›†ç”»é¢,,unknown,backend,,2025-10-28
ãƒã‚¤ãƒšãƒ¼ã‚¸ï¼šãƒ¬ãƒãƒ¼ãƒˆé–¢é€£,SP/ãƒ¬ãƒãƒ¼ãƒˆå†…å®¹è©³ç´°ç”»é¢,reports/[id].html,complete,frontend,å‹•çš„ãƒ¬ãƒãƒ¼ãƒˆè©³ç´°è¡¨ç¤º,2025-10-28
èªè¨¼,SP/ã‚µã‚¤ãƒ³ã‚¤ãƒ³TOPç”»é¢,signin.html,unknown,frontend,ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚µã‚¤ãƒ³ã‚¤ãƒ³ï¼ˆãƒ­ã‚°ã‚¤ãƒ³ï¼‰ç”»é¢,2025-10-27
èªè¨¼,SP/ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆæ–°è¦ç™»éŒ²ï¼‰ç”»é¢1,signup.html,unknown,frontend,,2025-10-28
èªè¨¼,SP/ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆæ–°è¦ç™»éŒ²ï¼‰ç”»é¢ï¼’,signup2.html,unknown,frontend,,2025-10-28
èªè¨¼,SP/ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆæ–°è¦ç™»éŒ²ï¼‰ç”»é¢3,signup3.html,unknown,frontend,,2025-10-28`;

            const lines = csvData.trim().split('\n');
            const headers = lines[0].split(',');
            projectData = {};

            for (let i = 1; i < lines.length; i++) {
                if (lines[i].trim()) {
                    const values = lines[i].split(',');
                    const item = {
                        id: i.toString(),
                        category: values[0] || 'æœªè¨­å®š',
                        pageName: values[1] || '',
                        url: values[2] || '',
                        pcStatus: values[3] === 'complete' ? 'completed' : (values[3] === 'pending' ? 'in-progress' : 'pending'),
                        spStatus: values[3] === 'complete' ? 'completed' : (values[3] === 'pending' ? 'in-progress' : 'pending'),
                        assignee: values[4] === 'frontend' ? 'ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰' : (values[4] === 'backend' ? 'ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰' : values[4] || ''),
                        function: values[5] || '',
                        lastUpdated: values[6] || new Date().toISOString().split('T')[0]
                    };
                    projectData[item.id] = item;
                }
            }

            // ã‚«ãƒ†ã‚´ãƒªãƒªã‚¹ãƒˆã‚’æ›´æ–°
            categories = [...new Set(Object.values(projectData).map(item => item.category))];
            
            await saveData();
        }

        // ãƒ‡ãƒ¼ã‚¿ä¿å­˜
        async function saveData() {
            try {
                if (firebaseInitialized && db) {
                    // Firebaseæ›¸ãè¾¼ã¿ï¼ˆãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ä»˜ãï¼‰
                    let retryCount = 0;
                    const maxRetries = 3;
                    
                    while (retryCount < maxRetries) {
                        try {
                            const payload = Object.assign({}, projectData, { _updatedAt: Date.now() });
                            await db.collection('projectData').doc('main').set(payload, { merge: true });
                            console.log('ãƒ‡ãƒ¼ã‚¿ã‚’Firebaseã«ä¿å­˜ã—ã¾ã—ãŸ');
                            return; // æˆåŠŸã—ãŸã‚‰çµ‚äº†
                        } catch (firebaseError) {
                            retryCount++;
                            console.warn(`Firebaseä¿å­˜å¤±æ•— (è©¦è¡Œ ${retryCount}/${maxRetries}):`, firebaseError);
                            
                            if (retryCount >= maxRetries) {
                                throw firebaseError; // æœ€å¤§ãƒªãƒˆãƒ©ã‚¤å›æ•°ã«é”ã—ãŸã‚‰ã‚¨ãƒ©ãƒ¼ã‚’æŠ•ã’ã‚‹
                            }
                            
                            // 1ç§’å¾…ã£ã¦ã‹ã‚‰ãƒªãƒˆãƒ©ã‚¤
                            await new Promise(resolve => setTimeout(resolve, 1000));
                        }
                    }
                } else {
                    console.warn('Firebase not initialized, saving to localStorage only');
                    localStorage.setItem('projectData', JSON.stringify(projectData));
                }
            } catch (error) {
                console.error('ãƒ‡ãƒ¼ã‚¿ä¿å­˜ã‚¨ãƒ©ãƒ¼:', error);
                // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: localStorageã«ä¿å­˜
                try {
                    localStorage.setItem('projectData', JSON.stringify(projectData));
                    console.log('ãƒ‡ãƒ¼ã‚¿ã‚’localStorageã«ä¿å­˜ã—ã¾ã—ãŸï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰');
                } catch (localError) {
                    console.error('localStorageä¿å­˜ã‚‚å¤±æ•—:', localError);
                }
            }
        }

        /* ========================================
           ğŸ¨ UIæ“ä½œ (UI Operations)
           ======================================== */
        
        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
        function showTab(tabName) {
            // é€²æ—ç®¡ç†ã‚¿ãƒ–ã®ã¿è¡¨ç¤ºï¼ˆã‚¿ã‚¹ã‚¯ãƒãƒ¼ã‚±ãƒƒãƒˆã¯åˆ¥ãƒšãƒ¼ã‚¸ï¼‰
            const targetView = document.getElementById('progress-view');
            if (targetView) {
                targetView.classList.remove('hidden');
            }
            
            // é¸æŠã•ã‚ŒãŸã‚¿ãƒ–ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«
            const targetTab = document.querySelector(`[onclick="showTab('${tabName}')"]`);
            if (targetTab) {
                targetTab.classList.add('active');
            }
            
            // ãƒ¢ãƒã‚¤ãƒ«ãƒŠãƒ“ã‚‚æ›´æ–°
            const mobileNavItem = document.querySelector(`[onclick="showTab('${tabName}')"]`);
            if (mobileNavItem && mobileNavItem.classList.contains('mobile-nav-item')) {
                mobileNavItem.classList.add('active');
            }
        }

        // è¡¨ç¤ºæ›´æ–°
        function updateDisplay() {
            updateStatistics();
            updateProgressBar();
            updateCategorySections();
            updateCategoryFilter();
        }

        // çµ±è¨ˆæƒ…å ±æ›´æ–°
        function updateStatistics() {
            const stats = {
                completed: 0,
                spNotCompleted: 0,
                inProgress: 0,
                pending: 0,
                waiting: 0
            };

            Object.values(projectData).forEach(item => {
                if (item.pcStatus === 'completed') stats.completed++;
                if (item.spStatus !== 'completed') stats.spNotCompleted++;
                if (item.pcStatus === 'in-progress' || item.spStatus === 'in-progress') stats.inProgress++;
                if (item.pcStatus === 'pending' && item.spStatus === 'pending') stats.pending++;
                if (item.pcStatus === 'waiting' || item.spStatus === 'waiting') stats.waiting++;
            });

            document.getElementById('completedCount').textContent = stats.completed;
            document.getElementById('spNotCompletedCount').textContent = stats.spNotCompleted;
            document.getElementById('inProgressCount').textContent = stats.inProgress;
            document.getElementById('pendingCount').textContent = stats.pending;
            document.getElementById('waitingCount').textContent = stats.waiting;
        }

        // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼æ›´æ–°
        function updateProgressBar() {
            const total = Object.keys(projectData).length;
            const completed = Object.values(projectData).filter(item => item.pcStatus === 'completed').length;
            const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;
            
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('progressText').textContent = `${percentage}% (${completed}/${total})`;
        }

        // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºå¤‰æ›é–¢æ•°ï¼ˆã‚¢ã‚¤ã‚³ãƒ³è¡¨ç¤ºï¼‰
        function getStatusDisplay(status) {
            switch(status) {
                case 'completed': return '<span style="color: #10b981; font-size: 18px;">âšªï¸</span>';
                case 'pending': return '<span style="color: #ef4444; font-size: 18px;">Ã—</span>';
                case 'in-progress': return 'é€²è¡Œä¸­';
                case 'waiting': return 'å¾…æ©Ÿä¸­';
                default: return '<span style="color: #ef4444; font-size: 18px;">Ã—</span>';
            }
        }

        // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ†ã‚­ã‚¹ãƒˆå¤‰æ›é–¢æ•°ï¼ˆå¾“æ¥ã®ãƒ†ã‚­ã‚¹ãƒˆè¡¨ç¤ºç”¨ï¼‰
        function getStatusText(status) {
            switch(status) {
                case 'completed': return 'å®Œäº†';
                case 'in-progress': return 'é€²è¡Œä¸­';
                case 'waiting': return 'å¾…æ©Ÿä¸­';
                case 'pending': return 'æœªç€æ‰‹';
                default: return 'æœªç€æ‰‹';
            }
        }

        // ã‚«ãƒ†ã‚´ãƒªã‚»ã‚¯ã‚·ãƒ§ãƒ³æ›´æ–°
        function updateCategorySections() {
            const container = document.getElementById('categorySections');
            container.innerHTML = '';

            categories.forEach(category => {
                const categoryItems = Object.values(projectData).filter(item => item.category === category);
                if (categoryItems.length === 0) return;

                // ã‚«ãƒ†ã‚´ãƒªå†…çµ±è¨ˆè¨ˆç®—
                const totalCount = categoryItems.length;
                const completedCount = categoryItems.filter(item => item.pcStatus === 'completed').length;
                const spNotCompletedCount = categoryItems.filter(item => item.spStatus !== 'completed').length;
                const inProgressCount = categoryItems.filter(item => item.pcStatus === 'in-progress' || item.spStatus === 'in-progress').length;
                const pendingCount = categoryItems.filter(item => item.pcStatus === 'pending' && item.spStatus === 'pending').length;
                const waitingCount = categoryItems.filter(item => item.pcStatus === 'waiting' || item.spStatus === 'waiting').length;

                const section = document.createElement('div');
                section.className = 'category-section';
                section.innerHTML = `
                    <div class="category-header">
                        <h3>${category}</h3>
                        <div class="category-stats">
                            <span class="stat-item">ç·æ•°: ${totalCount}</span>
                            <span class="stat-item">å®Œäº†: ${completedCount}</span>
                            <span class="stat-item">SPæœªå¯¾å¿œ: ${spNotCompletedCount}</span>
                            <span class="stat-item">é€²è¡Œä¸­: ${inProgressCount}</span>
                            <span class="stat-item">æœªç€æ‰‹: ${pendingCount}</span>
                            <span class="stat-item">å¾…æ©Ÿä¸­: ${waitingCount}</span>
                        </div>
                    </div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>ãƒšãƒ¼ã‚¸å</th>
                                <th>URL</th>
                                <th>PC</th>
                                <th>SP</th>
                                <th>æ¥­å‹™æ‹…å½“</th>
                                <th>æ©Ÿèƒ½</th>
                                <th>æœ€çµ‚æ›´æ–°æ—¥</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${categoryItems.map(item => `
                                <tr>
                                    <td>${item.pageName}</td>
                                    <td><a href="${item.url}" target="_blank" style="color: #FF679C; text-decoration: none;">${item.url}</a></td>
                                    <td>${getStatusDisplay(item.pcStatus)}</td>
                                    <td>${getStatusDisplay(item.spStatus)}</td>
                                    <td>${getAssigneeIcon(item.assignee)}</td>
                                    <td>${item.function || ''}</td>
                                    <td>${item.lastUpdated || ''}</td>
                                    <td>
                                        <button class="btn btn-edit" data-id="${item.id}" onclick="editItem('${item.id}')">ç·¨é›†</button>
                                        <button class="btn btn-delete" data-id="${item.id}" onclick="deleteItem('${item.id}')">å‰Šé™¤</button>
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                `;
                container.appendChild(section);
            });
        }

        // æ¥­å‹™æ‹…å½“ã‚¢ã‚¤ã‚³ãƒ³è¡¨ç¤ºé–¢æ•°
        function getAssigneeIcon(assignee) {
            const iconMap = {
                'ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼': '<img src="../images/ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼.svg" alt="ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼" style="width: 20px; height: 20px;">',
                'ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰': '<img src="../images/ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢.svg" alt="ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰" style="width: 20px; height: 20px;">',
                'ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰': '<img src="../images/ãƒãƒƒã‚¯ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢.svg" alt="ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰" style="width: 20px; height: 20px;">',
                'ãƒ¡ãƒ‡ã‚£ã‚¢': '<img src="../images/ãƒ¡ãƒ‡ã‚£ã‚¢.svg" alt="ãƒ¡ãƒ‡ã‚£ã‚¢" style="width: 20px; height: 20px;">',
                'ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³': '<img src="../images/direction.png" alt="ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³" style="width: 20px; height: 20px;">'
            };
            return iconMap[assignee] || '';
        }

        // ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ›´æ–°
        function updateCategoryFilter() {
            const filter = document.getElementById('categoryFilter');
            filter.innerHTML = '<option value="">ã™ã¹ã¦</option>';
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category;
                option.textContent = category;
                filter.appendChild(option);
            });
        }

        /* ========================================
           ğŸ›ï¸ è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ (Toggle Functions)
           ======================================== */
        function toggleStats() {
            const statsElement = document.querySelector('.stats');
            const toggleButton = document.getElementById('statsToggle');
            if (!statsElement || !toggleButton) return;
            const hidden = statsElement.classList.toggle('hidden');
            toggleButton.classList.toggle('active', !hidden);
            toggleButton.title = hidden ? 'çµ±è¨ˆã‚«ãƒ¼ãƒ‰ (éè¡¨ç¤º) - ã‚¯ãƒªãƒƒã‚¯ã§è¡¨ç¤º' : 'çµ±è¨ˆã‚«ãƒ¼ãƒ‰ (è¡¨ç¤ºä¸­) - ã‚¯ãƒªãƒƒã‚¯ã§éè¡¨ç¤º';
        }

        function toggleProgress() {
            const progressElement = document.querySelector('.progress-container');
            const toggleButton = document.getElementById('progressToggle');
            if (!progressElement || !toggleButton) return;
            const hidden = progressElement.classList.toggle('hidden');
            toggleButton.classList.toggle('active', !hidden);
            toggleButton.title = hidden ? 'å®Œæˆç‡ (éè¡¨ç¤º) - ã‚¯ãƒªãƒƒã‚¯ã§è¡¨ç¤º' : 'å®Œæˆç‡ (è¡¨ç¤ºä¸­) - ã‚¯ãƒªãƒƒã‚¯ã§éè¡¨ç¤º';
        }

        /* ========================================
           ğŸªŸ ãƒ¢ãƒ¼ãƒ€ãƒ«æ“ä½œ (Modal Operations)
           ======================================== */
        
        // æ–°è¦è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ«
        function openAddModal() {
            document.getElementById('addModal').style.display = 'block';
            document.getElementById('addForm').reset();
            document.getElementById('addLastUpdated').value = new Date().toISOString().split('T')[0];
        }

        function closeAddModal() {
            document.getElementById('addModal').style.display = 'none';
            document.getElementById('addNewCategoryGroup').style.display = 'none';
        }

        // ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«
        function editItem(id) {
            console.log('editItem called with id:', id);
            const data = projectData[id];
            if (!data) {
                console.error('Data not found for id:', id);
                return;
            }

            document.getElementById('editId').value = id;
            document.getElementById('editCategory').value = data.category;
            document.getElementById('editPageName').value = data.pageName;
            document.getElementById('editUrl').value = data.url;
            document.getElementById('editPCStatus').value = data.pcStatus || 'pending';
            document.getElementById('editSPStatus').value = data.spStatus || 'pending';
            document.getElementById('editAssignee').value = data.assignee || '';
            document.getElementById('editFunction').value = data.function || '';
            document.getElementById('editLastUpdated').value = data.lastUpdated || '';

            document.getElementById('editModal').style.display = 'block';
        }

        function closeEditModal() {
            document.getElementById('editModal').style.display = 'none';
            document.getElementById('editNewCategoryGroup').style.display = 'none';
        }

        // ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ¢ãƒ¼ãƒ€ãƒ«
        function openUploadModal() {
            document.getElementById('uploadModal').style.display = 'block';
        }

        function closeUploadModal() {
            document.getElementById('uploadModal').style.display = 'none';
        }

        // ã‚«ãƒ†ã‚´ãƒªç®¡ç†ãƒ¢ãƒ¼ãƒ€ãƒ«
        function openCategoryModal() {
            document.getElementById('categoryModal').style.display = 'block';
            updateCategoryList();
        }

        function closeCategoryModal() {
            document.getElementById('categoryModal').style.display = 'none';
        }

        /* ========================================
           ğŸ“ ãƒ•ã‚©ãƒ¼ãƒ å‡¦ç† (Form Handling)
           ======================================== */
        
        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
        function setupEventListeners() {
            // æ–°è¦è¿½åŠ ãƒ•ã‚©ãƒ¼ãƒ 
            document.getElementById('addForm').addEventListener('submit', function(e) {
                e.preventDefault();
                addNewItem();
            });

            // ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ 
            document.getElementById('editForm').addEventListener('submit', function(e) {
                e.preventDefault();
                updateItem();
            });

            // ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒ 
            document.getElementById('uploadForm').addEventListener('submit', function(e) {
                e.preventDefault();
                uploadCSV();
            });

            // ãƒ¢ãƒ¼ãƒ€ãƒ«å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
            window.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal')) {
                    e.target.style.display = 'none';
                }
            });
        }

        // æ–°è¦é …ç›®è¿½åŠ 
        async function addNewItem() {
            console.log('addNewItem called');
            const id = Date.now().toString();
            const newItem = {
                id: id,
                category: document.getElementById('addCategory').value || 'æœªè¨­å®š',
                pageName: document.getElementById('addPageName').value.trim() || 'æœªè¨­å®š',
                url: document.getElementById('addUrl').value.trim() || '',
                pcStatus: document.getElementById('addPCStatus').value || 'pending',
                spStatus: document.getElementById('addSPStatus').value || 'pending',
                assignee: document.getElementById('addAssignee').value || '',
                function: document.getElementById('addFunction').value.trim() || 'æœªè¨­å®š',
                lastUpdated: document.getElementById('addLastUpdated').value || new Date().toISOString().split('T')[0]
            };

            console.log('New item:', newItem);
            projectData[id] = newItem;
            console.log('Project data updated:', projectData);
            
            await saveData();
            updateDisplay();
            closeAddModal();
            console.log('Item added successfully');
        }

        // é …ç›®æ›´æ–°
        async function updateItem() {
            console.log('updateItem called');
            const id = document.getElementById('editId').value;
            const updatedItem = {
                id: id,
                category: document.getElementById('editCategory').value || 'æœªè¨­å®š',
                pageName: document.getElementById('editPageName').value.trim() || 'æœªè¨­å®š',
                url: document.getElementById('editUrl').value.trim() || '',
                pcStatus: document.getElementById('editPCStatus').value || 'pending',
                spStatus: document.getElementById('editSPStatus').value || 'pending',
                assignee: document.getElementById('editAssignee').value || '',
                function: document.getElementById('editFunction').value.trim() || 'æœªè¨­å®š',
                lastUpdated: document.getElementById('editLastUpdated').value || new Date().toISOString().split('T')[0]
            };

            console.log('Updated item:', updatedItem);
            projectData[id] = updatedItem;
            console.log('Project data updated:', projectData);
            
            await saveData();
            updateDisplay();
            closeEditModal();
            console.log('Item updated successfully');
        }

        // é …ç›®å‰Šé™¤
        async function deleteItem(id) {
            if (confirm('ã“ã®é …ç›®ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                delete projectData[id];
                await saveData();
                updateDisplay();
            }
        }

        /* ========================================
           ğŸ·ï¸ ã‚«ãƒ†ã‚´ãƒªç®¡ç† (Category Management)
           ======================================== */
        
        // ã‚«ãƒ†ã‚´ãƒªå¤‰æ›´å‡¦ç†
        function handleCategoryChange(selectElement) {
            const isAddNew = selectElement.value === '__ADD_CATEGORY__';
            const newCategoryGroup = document.getElementById(selectElement.id.replace('Category', 'NewCategoryGroup'));
            
            if (isAddNew) {
                newCategoryGroup.style.display = 'block';
                selectElement.value = '';
            } else {
                newCategoryGroup.style.display = 'none';
            }
        }

        // æ–°ã—ã„ã‚«ãƒ†ã‚´ãƒªåå‡¦ç†
        function handleNewCategoryName(inputElement) {
            const categoryName = inputElement.value.trim();
            if (categoryName && !categories.includes(categoryName)) {
                categories.push(categoryName);
                updateCategoryFilter();
                updateCategoryList();
                
                // ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã«æ–°ã—ã„ã‚«ãƒ†ã‚´ãƒªã‚’è¨­å®š
                const selectElement = document.getElementById(inputElement.id.replace('NewCategoryName', 'Category'));
                selectElement.value = categoryName;
                inputElement.value = '';
            }
        }

        // ã‚«ãƒ†ã‚´ãƒªãƒªã‚¹ãƒˆæ›´æ–°
        function updateCategoryList() {
            const container = document.getElementById('categoryList');
            container.innerHTML = '';
            
            categories.forEach(category => {
                const div = document.createElement('div');
                div.className = 'form-group';
                div.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span>${category}</span>
                        <button class="btn btn-delete" onclick="removeCategory('${category}')">å‰Šé™¤</button>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        // ã‚«ãƒ†ã‚´ãƒªå‰Šé™¤
        async function removeCategory(categoryName) {
            if (confirm(`ã‚«ãƒ†ã‚´ãƒªã€Œ${categoryName}ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`)) {
                categories = categories.filter(cat => cat !== categoryName);
                
                // ãã®ã‚«ãƒ†ã‚´ãƒªã®é …ç›®ã‚’ã€Œæœªè¨­å®šã€ã«ç§»å‹•
                Object.values(projectData).forEach(item => {
                    if (item.category === categoryName) {
                        item.category = 'æœªè¨­å®š';
                    }
                });
                
                if (!categories.includes('æœªè¨­å®š')) {
                    categories.push('æœªè¨­å®š');
                }
                
                await saveData();
                updateDisplay();
                updateCategoryList();
            }
        }

        // æ–°ã—ã„ã‚«ãƒ†ã‚´ãƒªè¿½åŠ 
        function addNewCategory() {
            const categoryName = document.getElementById('newCategoryName').value.trim();
            if (categoryName && !categories.includes(categoryName)) {
                categories.push(categoryName);
                updateCategoryFilter();
                updateCategoryList();
                document.getElementById('newCategoryName').value = '';
            }
        }

        /* ========================================
           ğŸ“ CSVç®¡ç† (CSV Management)
           ======================================== */
        
        // CSVãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
        function downloadCSV() {
            const headers = ['ID', 'ã‚«ãƒ†ã‚´ãƒª', 'ãƒšãƒ¼ã‚¸å', 'URL', 'PCã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹', 'SPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹', 'æ¥­å‹™æ‹…å½“', 'æ©Ÿèƒ½', 'æœ€çµ‚æ›´æ–°æ—¥'];
            const csvContent = [
                headers.join(','),
                ...Object.values(projectData).map(item => [
                    item.id,
                    item.category,
                    item.pageName,
                    item.url,
                    item.pcStatus,
                    item.spStatus,
                    item.assignee,
                    item.function,
                    item.lastUpdated
                ].join(','))
            ].join('\n');

            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'project_data.csv';
            link.click();
        }

        // CSVã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
        function uploadCSV() {
            const password = document.getElementById('password').value;
            const file = document.getElementById('csvFile').files[0];
            
            if (password !== 'misesapo') {
                alert('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“');
                return;
            }
            
            if (!file) {
                alert('ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = async function(e) {
                try {
                    const csv = e.target.result;
                    const lines = csv.split('\n');
                    const headers = lines[0].split(',');
                    
                    const newData = {};
                    for (let i = 1; i < lines.length; i++) {
                        if (lines[i].trim()) {
                            const values = lines[i].split(',');
                            const item = {};
                            headers.forEach((header, index) => {
                                item[header.trim()] = values[index] ? values[index].trim() : '';
                            });
                            newData[item.ID] = item;
                        }
                    }
                    
                    projectData = newData;
                    await saveData();
                    updateDisplay();
                    closeUploadModal();
                    alert('CSVãƒ•ã‚¡ã‚¤ãƒ«ãŒæ­£å¸¸ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã—ãŸ');
                } catch (error) {
                    console.error('CSVè§£æã‚¨ãƒ©ãƒ¼:', error);
                    alert('CSVãƒ•ã‚¡ã‚¤ãƒ«ã®è§£æã«å¤±æ•—ã—ã¾ã—ãŸ');
                }
            };
            reader.readAsText(file);
        }

        /* ========================================
           ğŸ” ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½ (Filter Functions)
           ======================================== */
        
        // ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
        function filterByCategory() {
            const selectedCategory = document.getElementById('categoryFilter').value;
            const sections = document.querySelectorAll('.category-section');
            
            sections.forEach(section => {
                if (!selectedCategory || section.querySelector('h3').textContent.includes(selectedCategory)) {
                    section.style.display = 'block';
                } else {
                    section.style.display = 'none';
                }
            });
        }

        // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
        function filterByStatus() {
            const selectedStatus = document.getElementById('statusFilter').value;
            // å®Ÿè£…ã¯å¿…è¦ã«å¿œã˜ã¦è¿½åŠ 
        }

        /* ========================================
           ğŸŒ ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•° (Global Functions)
           ======================================== */
        
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚³ãƒ¼ãƒ—ã«é–¢æ•°ã‚’è¨­å®š
        window.editItem = editItem;
        window.deleteItem = deleteItem;
        window.showTab = showTab;
        window.openAddModal = openAddModal;
        window.closeAddModal = closeAddModal;
        window.closeEditModal = closeEditModal;
        window.openUploadModal = openUploadModal;
        window.closeUploadModal = closeUploadModal;
        window.openCategoryModal = openCategoryModal;
        window.closeCategoryModal = closeCategoryModal;
        window.downloadCSV = downloadCSV;
        window.filterByCategory = filterByCategory;
        window.filterByStatus = filterByStatus;
        window.handleCategoryChange = handleCategoryChange;
        window.handleNewCategoryName = handleNewCategoryName;
        window.addNewCategory = addNewCategory;
        window.removeCategory = removeCategory;
        window.toggleStats = toggleStats;
        window.toggleProgress = toggleProgress;
    </script>
</body>
</html>
