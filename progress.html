<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>é–‹ç™ºé€²æ—çŠ¶æ³ | ãƒŸã‚»ã‚µãƒ</title>
    
    <!-- Firebase SDK -->
    <script type="module">
      import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
      import { getDatabase, ref, set, get, onValue } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';
      
      // Firebaseè¨­å®š
      const firebaseConfig = {
        apiKey: "AIzaSyDi2_U6INLm7sb-02GsdWzDl2qaFBe8US4",
        authDomain: "misesapo-progress.firebaseapp.com",
        databaseURL: "https://misesapo-progress-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "misesapo-progress",
        storageBucket: "misesapo-progress.firebasestorage.app",
        messagingSenderId: "926808186549",
        appId: "1:926808186549:web:91ce8534877c4ecf2e28fc",
        measurementId: "G-5JS29JLL13"
      };
      
      // FirebaseåˆæœŸåŒ–
      const app = initializeApp(firebaseConfig);
      const database = getDatabase(app);
      
      // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã¨ã—ã¦è¨­å®š
      window.firebaseDatabase = database;
      window.firebaseRef = ref;
      window.firebaseSet = set;
      window.firebaseGet = get;
      window.firebaseOnValue = onValue;
    </script>
    <style>
      :root { color-scheme: light dark; }
      
      * {
        box-sizing: border-box;
      }
      
      body { 
        font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; 
        margin: 0;
        padding: 16px; 
        background: #f8fafc;
        color: #1f2937;
        line-height: 1.5;
      }
      
      .container { 
        max-width: 1200px; 
        margin: 0 auto; 
        width: 100%;
      }
      
      h1 { 
        font-size: 1.5rem; 
        margin: 0 0 8px; 
        color: #FF679C;
        line-height: 1.3;
      }
      .new-label { 
        background: #10b981; 
        color: white; 
        padding: 4px 8px; 
        border-radius: 4px; 
        font-size: 0.8rem; 
        font-weight: 500; 
        margin-left: 8px; 
      }
      .new-label-container {
        text-align: center;
        margin: 24px 0;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 16px;
      }
      .btn-add-new {
        background: #FF679C;
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
        font-weight: 500;
        font-size: 0.9rem;
        transition: background-color 0.2s;
      }
      .btn-add-new:hover {
        background: #e55a8a;
      }
      .subtitle { 
        color: #6b7280; 
        font-size: 0.95rem; 
        margin-bottom: 24px; 
      }
      
      .summary { 
        background: white; 
        padding: 16px; 
        border-radius: 8px; 
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        margin-bottom: 24px;
      }
      
      .stats { 
        display: grid; 
        grid-template-columns: 1fr; 
        gap: 12px; 
      }
      .stat-card { 
        background: #f9fafb; 
        padding: 16px; 
        border-radius: 6px; 
        text-align: center;
        border-left: 4px solid #FF679C;
      }
      .stat-number { font-size: 2rem; font-weight: bold; color: #FF679C; }
      .stat-label { color: #6b7280; font-size: 0.9rem; }
      
      /* ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ */
      .progress-container {
        background: #f3f4f6;
        border-radius: 8px;
        padding: 16px;
        margin: 16px 0;
        border-left: 4px solid #FF679C;
      }
      
      .progress-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
      }
      
      .progress-label {
        font-weight: 600;
        color: #374151;
        font-size: 0.9rem;
      }
      
      .progress-percentage {
        font-weight: bold;
        color: #FF679C;
        font-size: 1.1rem;
      }
      
      .progress-bar {
        width: 100%;
        height: 12px;
        background: #e5e7eb;
        border-radius: 6px;
        overflow: hidden;
        position: relative;
      }
      
      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #FF679C 0%, #e55a8a 100%);
        border-radius: 6px;
        transition: width 0.5s ease-in-out;
        position: relative;
      }
      
      .progress-fill::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.3) 50%, transparent 100%);
        animation: shimmer 2s infinite;
      }
      
      @keyframes shimmer {
        0% { transform: translateX(-100%); }
        100% { transform: translateX(100%); }
      }
      
      .progress-stats {
        display: flex;
        justify-content: space-between;
        margin-top: 8px;
        font-size: 0.8rem;
        color: #6b7280;
      }
      
      .table-container {
        overflow-x: auto;
        margin-bottom: 24px;
        border-radius: 8px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      }
      
      table { 
        border-collapse: collapse; 
        width: 100%; 
        min-width: 800px;
        background: white;
      }
      
      th, td { 
        border: 1px solid #e5e7eb; 
        padding: 8px 12px; 
        text-align: left; 
        font-size: 0.85rem;
      }
      th { 
        background: #f9fafb; 
        font-weight: 600;
        color: #374151;
      }
      tr:hover { background: #f9fafb; }
      
      .status-complete { 
        background: #dcfce7; 
        color: #166534; 
        padding: 4px 8px; 
        border-radius: 4px; 
        font-weight: 600;
        font-size: 0.85rem;
      }
      .status-in-progress { 
        background: #fef3c7; 
        color: #92400e; 
        padding: 4px 8px; 
        border-radius: 4px; 
        font-weight: 600;
        font-size: 0.85rem;
      }
      .status-pending { 
        background: #f3f4f6; 
        color: #6b7280; 
        padding: 4px 8px; 
        border-radius: 4px; 
        font-weight: 600;
        font-size: 0.85rem;
      }
      
      .category-header {
        background: #FF679C;
        color: white;
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.8rem;
        letter-spacing: 0.5px;
      }
      
      .url-link { 
        color: #FF679C; 
        text-decoration: none; 
        font-weight: 500;
      }
      .url-link:hover { 
        text-decoration: underline; 
      }
      
      .code { 
        font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; 
        background: #f3f4f6;
        padding: 2px 6px;
        border-radius: 3px;
        font-size: 0.85rem;
      }
      
      .last-updated {
        color: #6b7280;
        font-size: 0.9rem;
        margin-top: 24px;
        text-align: center;
      }
      
      .last-updated {
        color: #059669;
        font-size: 0.85rem;
        font-weight: 500;
      }
      
      .btn-edit, .btn-update, .btn-delete {
        background: #FF679C;
        color: white;
        border: none;
        padding: 6px 10px;
        border-radius: 4px;
        font-size: 0.75rem;
        cursor: pointer;
        margin: 2px;
        white-space: nowrap;
        transition: background-color 0.2s;
      }
      
      .btn-edit:hover, .btn-update:hover, .btn-delete:hover {
        background: #E35687;
      }
      
      .btn-update {
        background: #059669;
      }
      
      .btn-delete {
        background: #ef4444;
      }
      
      .btn-delete:hover {
        background: #dc2626;
      }
      
      
      .edit-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.5);
        z-index: 1000;
      }
      
      .edit-modal-content {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        padding: 24px;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        min-width: 400px;
      }
      
      .edit-form {
        display: flex;
        flex-direction: column;
        gap: 16px;
      }
      
      .edit-form input, .edit-form select, .edit-form textarea {
        padding: 8px 12px;
        border: 1px solid #d1d5db;
        border-radius: 4px;
        font-size: 0.9rem;
      }
      
      .edit-form label {
        font-weight: 600;
        color: #374151;
      }
      
      .modal-buttons {
        display: flex;
        gap: 8px;
        justify-content: flex-end;
        margin-top: 16px;
      }
      
      .btn-save, .btn-cancel {
        padding: 8px 16px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-weight: 500;
      }
      
      .btn-save {
        background: #FF679C;
        color: white;
      }
      
      .btn-cancel {
        background: #6b7280;
        color: white;
      }
      
      .btn-delete {
        background: #ef4444;
        color: white;
        border: none;
        padding: 4px 8px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.8rem;
        font-weight: 500;
        margin-left: 4px;
        transition: background-color 0.2s;
      }
      
      .btn-delete:hover {
        background: #dc2626;
      }
      
      .delete-warning {
        color: #ef4444;
        font-weight: 500;
        margin: 8px 0;
      }
      
      /* ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆç”¨ */
      @media (min-width: 768px) {
        body {
          padding: 24px;
        }
        
        h1 {
          font-size: 2rem;
        }
        
        .subtitle {
          font-size: 1.1rem;
          margin-bottom: 32px;
        }
        
        .summary {
          padding: 24px;
          margin-bottom: 32px;
        }
        
        .stats {
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: 16px;
        }
        
        th, td {
          padding: 12px 16px;
          font-size: 0.9rem;
        }
        
        .btn-edit, .btn-update, .btn-delete {
          padding: 4px 8px;
          font-size: 0.8rem;
        }
      }
      
      /* ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ç”¨ */
      @media (min-width: 1024px) {
        body {
          padding: 32px;
        }
        
        .container {
          max-width: 1400px;
        }
        
        h1 {
          font-size: 2.5rem;
        }
        
        .subtitle {
          font-size: 1.2rem;
        }
        
        .summary {
          padding: 32px;
        }
        
        .stats {
          gap: 20px;
        }
        
        th, td {
          padding: 16px 20px;
          font-size: 1rem;
        }
        
        .btn-edit, .btn-update, .btn-delete {
          padding: 6px 12px;
          font-size: 0.85rem;
        }
        
        .progress-container {
          padding: 20px;
        }
        
        .progress-header {
          margin-bottom: 12px;
        }
        
        .progress-bar {
          height: 16px;
        }
      }
      
      /* ã‚¹ãƒãƒ›ç”¨ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ */
      @media (max-width: 767px) {
        .progress-container {
          padding: 12px;
          margin: 12px 0;
        }
        
        .progress-header {
          flex-direction: column;
          align-items: flex-start;
          gap: 4px;
        }
        
        .progress-label {
          font-size: 0.85rem;
        }
        
        .progress-percentage {
          font-size: 1rem;
        }
        
        .progress-bar {
          height: 10px;
        }
        
        .progress-stats {
          font-size: 0.75rem;
          margin-top: 6px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸš€ ãƒŸã‚»ã‚µãƒ é–‹ç™ºé€²æ—çŠ¶æ³</h1>
      <p class="subtitle">å®šæœŸæ¸…æƒã‚µãƒ¼ãƒ“ã‚¹ Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ - å®Ÿè£…çŠ¶æ³ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</p>
      
      <div class="summary">
        <h2>ğŸ“Š ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦</h2>
        <div class="stats">
          <div class="stat-card">
            <div class="stat-number">19</div>
            <div class="stat-label">å®Ÿè£…æ¸ˆã¿ãƒšãƒ¼ã‚¸</div>
          </div>
          <div class="stat-card">
            <div class="stat-number">34</div>
            <div class="stat-label">ã‚µãƒ¼ãƒ“ã‚¹é …ç›®</div>
          </div>
          <div class="stat-card">
            <div class="stat-number">6</div>
            <div class="stat-label">ã‚«ãƒ†ã‚´ãƒª</div>
          </div>
        </div>
        
        <!-- ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ -->
        <div class="progress-container">
          <div class="progress-header">
            <span class="progress-label">ğŸ“Š ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå®Œæˆç‡</span>
            <span class="progress-percentage" id="progressPercentage">100%</span>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" id="progressFill" style="width: 100%"></div>
          </div>
          <div class="progress-stats">
            <span id="completedCount">19</span> / <span id="totalCount">19</span> ãƒšãƒ¼ã‚¸å®Œäº†
          </div>
          <div style="margin-top: 8px; font-size: 0.8rem; color: #6b7280;">
            <strong>å®Ÿè£…çŠ¶æ³ã®åˆ¤å®šåŸºæº–:</strong><br>
            âœ… <strong>å®Œå…¨å®Ÿè£…</strong>: HTML + CSS + JavaScript + æ©Ÿèƒ½å‹•ä½œ<br>
            ğŸ”„ <strong>éƒ¨åˆ†å®Ÿè£…</strong>: HTML + CSSã€JavaScriptæœªå®Ÿè£…<br>
            ğŸ“ <strong>ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</strong>: HTMLã®ã¿ã€æ©Ÿèƒ½æœªå®Ÿè£…<br>
            âŒ <strong>æœªå®Ÿè£…</strong>: ãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ã—ãªã„
          </div>
        </div>
      </div>
      
      <div class="new-label-container">
        <button class="btn-add-new" onclick="openAddNewModal()">+ æ–°è¦é …ç›®ã‚’è¿½åŠ </button>
      </div>

      <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>ãƒšãƒ¼ã‚¸å</th>
            <th>URL</th>
            <th>ã‚«ãƒ†ã‚´ãƒª</th>
            <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
            <th>æœ€çµ‚æ›´æ–°æ—¥</th>
            <th>æ©Ÿèƒ½</th>
            <th>æ“ä½œ</th>
          </tr>
        </thead>
        <tbody>
          <!-- ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä¸­èº«ã¯å‹•çš„ã«ç”Ÿæˆã•ã‚Œã¾ã™ -->
        </tbody>
      </table>
      </div>
      
      <div class="last-updated">
        <p>æœ€çµ‚æ›´æ–°: 2025å¹´10æœˆ23æ—¥ | ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒãƒ¼: http://localhost:5173</p>
      </div>
    </div>

      <!-- æ–°è¦é …ç›®è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ« -->
      <div id="addNewModal" class="edit-modal">
        <div class="edit-modal-content">
          <h3>æ–°è¦é …ç›®ã‚’è¿½åŠ </h3>
          <form class="edit-form" id="addNewForm">
            <div>
              <label for="newPageName">ãƒšãƒ¼ã‚¸å:</label>
              <input type="text" id="newPageName" name="pageName" required>
            </div>
            <div>
              <label for="newUrl">URL:</label>
              <input type="text" id="newUrl" name="url" placeholder="/path/to/page.html (æœªå®Ÿè£…ã®å ´åˆã¯ç©ºç™½å¯)">
            </div>
            <div>
              <label for="newCategory">ã‚«ãƒ†ã‚´ãƒª:</label>
              <select id="newCategory" name="category" required>
                <option value="">ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠ</option>
                <option value="ãƒ¡ã‚¤ãƒ³">ãƒ¡ã‚¤ãƒ³</option>
                <option value="èªè¨¼">èªè¨¼</option>
                <option value="ç™»éŒ²">ç™»éŒ²</option>
                <option value="ã‚µãƒãƒ¼ãƒˆ">ã‚µãƒãƒ¼ãƒˆ</option>
                <option value="ãƒã‚¤ãƒšãƒ¼ã‚¸">ãƒã‚¤ãƒšãƒ¼ã‚¸</option>
                 <option value="ã‚«ãƒ¼ãƒˆ">ã‚«ãƒ¼ãƒˆ</option>
                 <option value="ãƒ¬ã‚¸">ãƒ¬ã‚¸</option>
                 <option value="ãƒ¬ãƒãƒ¼ãƒˆ">ãƒ¬ãƒãƒ¼ãƒˆ</option>
                <option value="ç®¡ç†">ç®¡ç†</option>
              </select>
            </div>
            <div>
              <label for="newStatus">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:</label>
              <select id="newStatus" name="status" required>
                <option value="complete">âœ… å®Œå…¨å®Ÿè£…</option>
                <option value="in-progress">ğŸ”„ å®Ÿè£…ä¸­</option>
                <option value="pending">â³ æœªå®Ÿè£…</option>
              </select>
            </div>
            <div>
              <label for="newFunction">æ©Ÿèƒ½èª¬æ˜:</label>
              <textarea id="newFunction" name="function" rows="3" required></textarea>
            </div>
            <div class="modal-buttons">
              <button type="button" class="btn-cancel" onclick="closeAddNewModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
              <button type="submit" class="btn-save">è¿½åŠ </button>
            </div>
          </form>
        </div>
      </div>

      <!-- å‰Šé™¤ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ« -->
      <div id="deleteModal" class="edit-modal">
        <div class="edit-modal-content">
          <h3>é …ç›®ã‚’å‰Šé™¤</h3>
          <p>ã“ã®é …ç›®ã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ</p>
          <p class="delete-warning">ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚</p>
          <div class="modal-buttons">
            <button type="button" class="btn-cancel" onclick="closeDeleteModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
            <button type="button" class="btn-delete" onclick="confirmDelete()">å‰Šé™¤</button>
          </div>
        </div>
      </div>

      <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
      <div id="editModal" class="edit-modal">
      <div class="edit-modal-content">
        <h3>ãƒšãƒ¼ã‚¸æƒ…å ±ã‚’ç·¨é›†</h3>
        <form class="edit-form" id="editForm">
          <div>
            <label for="editPageName">ãƒšãƒ¼ã‚¸å:</label>
            <input type="text" id="editPageName" name="pageName" required>
          </div>
            <div>
              <label for="editUrl">URL:</label>
              <input type="text" id="editUrl" name="url" placeholder="/path/to/page.html (æœªå®Ÿè£…ã®å ´åˆã¯ç©ºç™½å¯)">
            </div>
          <div>
            <label for="editCategory">ã‚«ãƒ†ã‚´ãƒª:</label>
            <select id="editCategory" name="category">
              <option value="ãƒ¡ã‚¤ãƒ³">ãƒ¡ã‚¤ãƒ³</option>
              <option value="èªè¨¼">èªè¨¼</option>
              <option value="ç™»éŒ²">ç™»éŒ²</option>
              <option value="ã‚µãƒãƒ¼ãƒˆ">ã‚µãƒãƒ¼ãƒˆ</option>
              <option value="ãƒã‚¤ãƒšãƒ¼ã‚¸">ãƒã‚¤ãƒšãƒ¼ã‚¸</option>
              <option value="ç®¡ç†">ç®¡ç†</option>
            </select>
          </div>
          <div>
            <label for="editStatus">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:</label>
            <select id="editStatus" name="status">
              <option value="complete">âœ… å®Œå…¨å®Ÿè£…</option>
              <option value="in-progress">ğŸ”„ å®Ÿè£…ä¸­</option>
              <option value="pending">â³ æœªå®Ÿè£…</option>
            </select>
          </div>
          <div>
            <label for="editFunction">æ©Ÿèƒ½èª¬æ˜:</label>
            <textarea id="editFunction" name="function" rows="3"></textarea>
          </div>
          <div class="modal-buttons">
            <button type="button" class="btn-cancel" onclick="closeEditModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
            <button type="submit" class="btn-save">ä¿å­˜</button>
          </div>
        </form>
      </div>
    </div>

    <script>
      // ãƒšãƒ¼ã‚¸ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†
      let pageData = {
        'index': {
          name: 'ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸',
          category: 'ãƒ¡ã‚¤ãƒ³',
          status: 'complete',
          function: 'ã‚µãƒ¼ãƒ“ã‚¹ä¸€è¦§ãƒ»ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿',
          lastUpdated: '2025-10-23'
        }
      };

      // ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã
      function editPage(pageId) {
        const modal = document.getElementById('editModal');
        const data = pageData[pageId] || {};
        
        document.getElementById('editPageName').value = data.name || '';
         document.getElementById('editUrl').value = data.url || '';
        document.getElementById('editCategory').value = data.category || 'ãƒ¡ã‚¤ãƒ³';
        document.getElementById('editStatus').value = data.status || 'complete';
        document.getElementById('editFunction').value = data.function || '';
        
        modal.style.display = 'block';
        modal.dataset.pageId = pageId;
      }

      // ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
      function closeEditModal() {
        document.getElementById('editModal').style.display = 'none';
      }

      // æ–°è¦è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã
      function openAddNewModal() {
        document.getElementById('addNewModal').style.display = 'flex';
      }

      // æ–°è¦è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
      function closeAddNewModal() {
        document.getElementById('addNewModal').style.display = 'none';
        document.getElementById('addNewForm').reset();
      }

      // å‰Šé™¤ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã
      function deletePage(pageId) {
        document.getElementById('deleteModal').style.display = 'flex';
        document.getElementById('deleteModal').dataset.pageId = pageId;
      }

      // å‰Šé™¤ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
      function closeDeleteModal() {
        document.getElementById('deleteModal').style.display = 'none';
      }

      // å‰Šé™¤ã‚’ç¢ºèª
      function confirmDelete() {
        const pageId = document.getElementById('deleteModal').dataset.pageId;
        
        // ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å‰Šé™¤
        delete pageData[pageId];
        
         // Firebaseã«ä¿å­˜
         saveToFirebase();
        
        // ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰è¡Œã‚’å‰Šé™¤
        const row = document.querySelector(`[data-page="${pageId}"]`);
        if (row) {
          row.closest('tr').remove();
        }
        
        // çµ±è¨ˆæƒ…å ±ã‚’æ›´æ–°
        updateStats();
        
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        closeDeleteModal();
      }

      // ãƒ†ãƒ¼ãƒ–ãƒ«ã«æ–°ã—ã„è¡Œã‚’å‹•çš„ã«è¿½åŠ 
      function addNewRowToTable(pageId, pageData) {
        const table = document.querySelector('table tbody');
        const category = pageData.category;
        
        // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®è¡¨ç¤ºãƒ†ã‚­ã‚¹ãƒˆã¨ã‚¯ãƒ©ã‚¹ã‚’å–å¾—
        const statusText = getStatusText(pageData.status);
        const statusClass = getStatusClass(pageData.status);
        
           // URLè¡¨ç¤ºã‚’æ±ºå®š
           const urlDisplay = pageData.url || 'æœªå®š';
           const linkDisplay = pageData.url ? 
             `<a href="http://localhost:5173${pageData.url}" class="url-link" target="_blank">${pageData.name}</a>` : 
             pageData.name;
           
        // æ–°ã—ã„è¡Œã‚’ä½œæˆ
        const newRow = document.createElement('tr');
        newRow.innerHTML = `
             <td>${linkDisplay}</td>
             <td><code class="code">${urlDisplay}</code></td>
          <td>${category}</td>
          <td><span class="${statusClass}">${statusText}</span></td>
          <td><span class="last-updated" data-page="${pageId}">${pageData.lastUpdated}</span></td>
          <td>${pageData.function}</td>
          <td>
            <button class="btn-edit" onclick="editPage('${pageId}')">ç·¨é›†</button>
            <button class="btn-update" onclick="updateTimestamp('${pageId}')">æ›´æ–°</button>
            <button class="btn-delete" onclick="deletePage('${pageId}')">å‰Šé™¤</button>
          </td>
        `;
        
        // ã‚«ãƒ†ã‚´ãƒªã«å¿œã˜ã¦é©åˆ‡ãªä½ç½®ã«è¿½åŠ 
        insertRowByCategory(table, newRow, category);
      }

      // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—
      function getStatusText(status) {
        const statusMap = {
          'complete': 'âœ… å®Œå…¨å®Ÿè£…',
          'in-progress': 'ğŸ”„ å®Ÿè£…ä¸­',
          'pending': 'â³ æœªå®Ÿè£…'
        };
        return statusMap[status] || status;
      }

      // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚¯ãƒ©ã‚¹ã‚’å–å¾—
      function getStatusClass(status) {
        const statusClassMap = {
          'complete': 'status-complete',
          'in-progress': 'status-in-progress',
          'pending': 'status-pending'
        };
        return statusClassMap[status] || 'status-complete';
      }

      // ã‚«ãƒ†ã‚´ãƒªã«å¿œã˜ã¦æ–°è¦é …ç›®ã‚’é©åˆ‡ãªä½ç½®ã«é…ç½®
      function insertRowByCategory(table, newRow, category) {
        const categoryMap = {
          'ãƒ¡ã‚¤ãƒ³': 'ğŸ  ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸',
          'èªè¨¼': 'ğŸ” èªè¨¼é–¢é€£',
          'ç™»éŒ²': 'ğŸ“‹ ç™»éŒ²é–¢é€£',
          'ã‚µãƒãƒ¼ãƒˆ': 'ğŸ“ ã‚µãƒãƒ¼ãƒˆ',
          'ãƒã‚¤ãƒšãƒ¼ã‚¸': 'ğŸ‘¤ ãƒã‚¤ãƒšãƒ¼ã‚¸é–¢é€£',
             'ã‚«ãƒ¼ãƒˆ': 'ğŸ›’ ã‚«ãƒ¼ãƒˆ',
             'ãƒ¬ã‚¸': 'ğŸ’³ ãƒ¬ã‚¸',
             'ãƒ¬ãƒãƒ¼ãƒˆ': 'ğŸ“Š ãƒ¬ãƒãƒ¼ãƒˆ',
          'ç®¡ç†': 'ğŸ”§ ç®¡ç†ç”»é¢'
        };
        
        const categoryHeader = categoryMap[category];
        const rows = Array.from(table.querySelectorAll('tr'));
        
        // ã‚«ãƒ†ã‚´ãƒªãƒ˜ãƒƒãƒ€ãƒ¼ã‚’è¦‹ã¤ã‘ã‚‹
        let categoryHeaderIndex = -1;
        for (let i = 0; i < rows.length; i++) {
          const row = rows[i];
          if (row.classList.contains('category-header') && row.textContent.includes(categoryHeader)) {
            categoryHeaderIndex = i;
            break;
          }
        }
        
        if (categoryHeaderIndex === -1) {
          // ã‚«ãƒ†ã‚´ãƒªãƒ˜ãƒƒãƒ€ãƒ¼ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯æœ€å¾Œã«è¿½åŠ 
          table.appendChild(newRow);
          return;
        }
        
        // ã‚«ãƒ†ã‚´ãƒªã®æœ€å¾Œã®é …ç›®ã‚’è¦‹ã¤ã‘ã‚‹
        let lastItemIndex = categoryHeaderIndex;
        for (let i = categoryHeaderIndex + 1; i < rows.length; i++) {
          const row = rows[i];
          if (row.classList.contains('category-header')) {
            // æ¬¡ã®ã‚«ãƒ†ã‚´ãƒªãƒ˜ãƒƒãƒ€ãƒ¼ã«åˆ°é”ã—ãŸã‚‰çµ‚äº†
            break;
          }
          lastItemIndex = i;
        }
        
        // ã‚«ãƒ†ã‚´ãƒªã®æœ€å¾Œã®é …ç›®ã®æ¬¡ã®ä½ç½®ã«æŒ¿å…¥
        const insertIndex = lastItemIndex + 1;
        const nextRow = table.children[insertIndex];
        if (nextRow) {
          table.insertBefore(newRow, nextRow);
        } else {
          table.appendChild(newRow);
        }
      }

      // çµ±è¨ˆæƒ…å ±ã‚’æ›´æ–°
      function updateStats() {
        const totalPages = Object.keys(pageData).length;
        const statNumbers = document.querySelectorAll('.stat-number');
        
        // å®Ÿè£…æ¸ˆã¿ãƒšãƒ¼ã‚¸æ•°ã‚’æ›´æ–°
        if (statNumbers.length > 0) {
          statNumbers[0].textContent = totalPages;
        }
        
        // å®Œæˆç‡ã‚’è¨ˆç®—ï¼ˆå®Œå…¨å®Ÿè£…ã®é …ç›®æ•° / ç·é …ç›®æ•° * 100ï¼‰
        const completePages = Object.values(pageData).filter(page => page.status === 'complete').length;
        const completionRate = totalPages > 0 ? Math.round((completePages / totalPages) * 100) : 0;
        
           // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã‚’æ›´æ–°
           updateProgressBar(completePages, totalPages, completionRate);
         }
         
         // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã‚’æ›´æ–°
         function updateProgressBar(completed, total, percentage) {
           const progressFill = document.getElementById('progressFill');
           const progressPercentage = document.getElementById('progressPercentage');
           const completedCount = document.getElementById('completedCount');
           const totalCount = document.getElementById('totalCount');
           
           if (progressFill) {
             progressFill.style.width = percentage + '%';
           }
           
           if (progressPercentage) {
             progressPercentage.textContent = percentage + '%';
           }
           
           if (completedCount) {
             completedCount.textContent = completed;
           }
           
           if (totalCount) {
             totalCount.textContent = total;
           }
         }
         
         // ãƒ†ãƒ¼ãƒ–ãƒ«è¡Œã‚’å‹•çš„ã«æ›´æ–°
         function updateTableRow(pageId, pageData) {
           const row = document.querySelector(`tr[data-page="${pageId}"]`);
           if (!row) return;
           
           // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®è¡¨ç¤ºãƒ†ã‚­ã‚¹ãƒˆã¨ã‚¯ãƒ©ã‚¹ã‚’å–å¾—
           const statusText = getStatusText(pageData.status);
           const statusClass = getStatusClass(pageData.status);
           
           // URLè¡¨ç¤ºã‚’æ±ºå®š
           const urlDisplay = pageData.url || 'æœªå®š';
           const linkDisplay = pageData.url ? 
             `<a href="http://localhost:5173${pageData.url}" class="url-link" target="_blank">${pageData.name}</a>` : 
             pageData.name;
           
           // è¡Œã®å†…å®¹ã‚’æ›´æ–°
           row.innerHTML = `
             <td>${linkDisplay}</td>
             <td><code class="code">${urlDisplay}</code></td>
             <td>${pageData.category}</td>
             <td><span class="${statusClass}">${statusText}</span></td>
             <td><span class="last-updated" data-page="${pageId}">${pageData.lastUpdated}</span></td>
             <td>${pageData.function}</td>
             <td>
               <button class="btn-edit" onclick="editPage('${pageId}')">ç·¨é›†</button>
               <button class="btn-update" onclick="updateTimestamp('${pageId}')">æ›´æ–°</button>
               <button class="btn-delete" onclick="deletePage('${pageId}')">å‰Šé™¤</button>
             </td>
           `;
         }
         
         // å®Ÿéš›ã«å­˜åœ¨ã™ã‚‹HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’åŸºã«ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ§‹ç¯‰
         function buildTableFromExistingFiles() {
           const table = document.querySelector('table tbody');
           
           // å®Ÿéš›ã«å­˜åœ¨ã™ã‚‹HTMLãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒªã‚¹ãƒˆï¼ˆå®Ÿè£…çŠ¶æ³ã‚’æ­£ç¢ºã«åˆ¤å®šï¼‰
           // å®Ÿè£…çŠ¶æ³ã®åˆ¤å®šåŸºæº–:
           // - 'full': å®Œå…¨å®Ÿè£…ï¼ˆHTML + CSS + JavaScript + æ©Ÿèƒ½å‹•ä½œï¼‰
           // - 'partial': éƒ¨åˆ†å®Ÿè£…ï¼ˆHTML + CSSã€JavaScriptæœªå®Ÿè£…ï¼‰
           // - 'template': ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã¿ï¼ˆHTMLã®ã¿ã€æ©Ÿèƒ½æœªå®Ÿè£…ï¼‰
           // - 'missing': æœªå®Ÿè£…ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ã—ãªã„ï¼‰
           const existingFiles = [
             // ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
             { id: 'index', name: 'ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸', url: '/index.html', category: 'ãƒ¡ã‚¤ãƒ³', status: 'complete', function: 'ã‚µãƒ¼ãƒ“ã‚¹ä¸€è¦§ãƒ»ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿', implementation: 'full' },
             { id: 'report', name: 'ãƒ¬ãƒãƒ¼ãƒˆ', url: '/report.html', category: 'ãƒ¡ã‚¤ãƒ³', status: 'complete', function: 'æ¸…æƒãƒ¬ãƒãƒ¼ãƒˆè¡¨ç¤º', implementation: 'full' },
             { id: 'mypage', name: 'ãƒã‚¤ãƒšãƒ¼ã‚¸', url: '/mypage.html', category: 'ãƒ¡ã‚¤ãƒ³', status: 'complete', function: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ç®¡ç†', implementation: 'full' },
             
             // èªè¨¼é–¢é€£
             { id: 'signin', name: 'ãƒ­ã‚°ã‚¤ãƒ³', url: '/signin.html', category: 'èªè¨¼', status: 'complete', function: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³', implementation: 'full' },
             { id: 'signup', name: 'æ–°è¦ç™»éŒ²', url: '/signup.html', category: 'èªè¨¼', status: 'complete', function: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²', implementation: 'full' },
             { id: 'signup2', name: 'æ–°è¦ç™»éŒ²2', url: '/signup2.html', category: 'èªè¨¼', status: 'complete', function: 'è¿½åŠ æƒ…å ±å…¥åŠ›', implementation: 'full' },
             { id: 'signup3', name: 'æ–°è¦ç™»éŒ²3', url: '/signup3.html', category: 'èªè¨¼', status: 'complete', function: 'æœ€çµ‚ç¢ºèª', implementation: 'full' },
             { id: 'reset-password', name: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆ', url: '/reset-password.html', category: 'èªè¨¼', status: 'complete', function: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å†è¨­å®š', implementation: 'full' },
             
             // ç™»éŒ²é–¢é€£
             { id: 'personal', name: 'å€‹äººç™»éŒ²', url: '/registration/personal.html', category: 'ç™»éŒ²', status: 'complete', function: 'å€‹äººæƒ…å ±ç™»éŒ²', implementation: 'full' },
             { id: 'personal2', name: 'å€‹äººç™»éŒ²2', url: '/registration/personal2.html', category: 'ç™»éŒ²', status: 'complete', function: 'è¿½åŠ æƒ…å ±å…¥åŠ›', implementation: 'full' },
             { id: 'corporation', name: 'æ³•äººç™»éŒ²', url: '/registration/corporation.html', category: 'ç™»éŒ²', status: 'complete', function: 'æ³•äººæƒ…å ±ç™»éŒ²', implementation: 'full' },
             { id: 'corporation2', name: 'æ³•äººç™»éŒ²2', url: '/registration/corporation2.html', category: 'ç™»éŒ²', status: 'complete', function: 'è¿½åŠ æƒ…å ±å…¥åŠ›', implementation: 'full' },
             { id: 'corporation3', name: 'æ³•äººç™»éŒ²3', url: '/registration/corporation3.html', category: 'ç™»éŒ²', status: 'complete', function: 'æœ€çµ‚ç¢ºèª', implementation: 'full' },
             { id: 'complete', name: 'ç™»éŒ²å®Œäº†', url: '/registration/complete.html', category: 'ç™»éŒ²', status: 'complete', function: 'å®Œäº†é€šçŸ¥', implementation: 'full' },
             
             // ã‚µãƒãƒ¼ãƒˆ
             { id: 'inquiry-complete', name: 'ãŠå•ã„åˆã‚ã›å®Œäº†', url: '/inquiry/complete.html', category: 'ã‚µãƒãƒ¼ãƒˆ', status: 'complete', function: 'å®Œäº†é€šçŸ¥', implementation: 'full' },
             
             // ãƒã‚¤ãƒšãƒ¼ã‚¸é–¢é€£
             { id: 'mypage-info', name: 'å€‹äººæƒ…å ±', url: '/mypage/info.html', category: 'ãƒã‚¤ãƒšãƒ¼ã‚¸', status: 'complete', function: 'æƒ…å ±ç·¨é›†ãƒ»æ›´æ–°', implementation: 'full' },
             { id: 'mypage-inquiry', name: 'ãŠå•ã„åˆã‚ã›', url: '/mypage/inquiry.html', category: 'ãƒã‚¤ãƒšãƒ¼ã‚¸', status: 'complete', function: 'ã‚µãƒãƒ¼ãƒˆå•ã„åˆã‚ã›', implementation: 'full' },
             
             // ç®¡ç†ç”»é¢
             { id: 'sitemap', name: 'ã‚µã‚¤ãƒˆãƒãƒƒãƒ—', url: '/admin/sitemap.html', category: 'ç®¡ç†', status: 'complete', function: 'ã‚µã‚¤ãƒˆãƒãƒƒãƒ—è¡¨ç¤º', implementation: 'full' },
             { id: 'progress', name: 'é–‹ç™ºé€²æ—çŠ¶æ³', url: '/admin/progress.html', category: 'ç®¡ç†', status: 'complete', function: 'é€²æ—ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰', implementation: 'full' }
           ];
           
           // ã‚«ãƒ†ã‚´ãƒªã”ã¨ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
           const categories = {
             'ãƒ¡ã‚¤ãƒ³': 'ğŸ  ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸',
             'èªè¨¼': 'ğŸ” èªè¨¼é–¢é€£',
             'ç™»éŒ²': 'ğŸ“‹ ç™»éŒ²é–¢é€£',
             'ã‚µãƒãƒ¼ãƒˆ': 'ğŸ“ ã‚µãƒãƒ¼ãƒˆ',
             'ãƒã‚¤ãƒšãƒ¼ã‚¸': 'ğŸ‘¤ ãƒã‚¤ãƒšãƒ¼ã‚¸é–¢é€£',
             'ç®¡ç†': 'ğŸ”§ ç®¡ç†ç”»é¢'
           };
           
           // å„ã‚«ãƒ†ã‚´ãƒªã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ 
           Object.keys(categories).forEach(category => {
             const categoryFiles = existingFiles.filter(file => file.category === category);
             if (categoryFiles.length > 0) {
               // ã‚«ãƒ†ã‚´ãƒªãƒ˜ãƒƒãƒ€ãƒ¼ã‚’è¿½åŠ 
               const headerRow = document.createElement('tr');
               headerRow.className = 'category-header';
               headerRow.innerHTML = `<td colspan="7">${categories[category]}</td>`;
               table.appendChild(headerRow);
               
               // ã‚«ãƒ†ã‚´ãƒªã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ 
               categoryFiles.forEach(file => {
                 const row = document.createElement('tr');
                 row.setAttribute('data-page', file.id);
                 
                 // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®è¡¨ç¤ºãƒ†ã‚­ã‚¹ãƒˆã¨ã‚¯ãƒ©ã‚¹ã‚’å–å¾—
                 const statusText = getStatusText(file.status);
                 const statusClass = getStatusClass(file.status);
                 
                 // URLè¡¨ç¤ºã‚’æ±ºå®š
                 const urlDisplay = file.url;
                 const linkDisplay = `<a href="http://localhost:5173${file.url}" class="url-link" target="_blank">${file.name}</a>`;
                 
                 row.innerHTML = `
                   <td>${linkDisplay}</td>
                   <td><code class="code">${urlDisplay}</code></td>
                   <td>${file.category}</td>
                   <td><span class="${statusClass}">${statusText}</span></td>
                   <td><span class="last-updated" data-page="${file.id}">2025-01-27</span></td>
                   <td>${file.function}</td>
                   <td>
                     <button class="btn-edit" onclick="editPage('${file.id}')">ç·¨é›†</button>
                     <button class="btn-update" onclick="updateTimestamp('${file.id}')">æ›´æ–°</button>
                     <button class="btn-delete" onclick="deletePage('${file.id}')">å‰Šé™¤</button>
                   </td>
                 `;
                 
                 table.appendChild(row);
                 
                 // pageDataã«è¿½åŠ 
                 pageData[file.id] = {
                   name: file.name,
                   url: file.url,
                   category: file.category,
                   status: file.status,
                   function: file.function,
                   implementation: file.implementation,
                   lastUpdated: '2025-01-27'
                 };
               });
             }
           });
           
           // Firebaseã«ä¿å­˜
           saveToFirebase();
      }

      // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’æ›´æ–°
      function updateTimestamp(pageId) {
        const today = new Date().toISOString().split('T')[0];
        const element = document.querySelector(`[data-page="${pageId}"]`);
        if (element) {
          element.textContent = today;
        }
        
        // ãƒ‡ãƒ¼ã‚¿ã‚‚æ›´æ–°
        if (pageData[pageId]) {
          pageData[pageId].lastUpdated = today;
        }
        
         // Firebaseã«ä¿å­˜
         saveToFirebase();
      }

      // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡å‡¦ç†
      document.getElementById('editForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const pageId = document.getElementById('editModal').dataset.pageId;
        const formData = new FormData(this);
        
        // ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°
        pageData[pageId] = {
          name: formData.get('pageName'),
             url: formData.get('url') || '',
          category: formData.get('category'),
          status: formData.get('status'),
          function: formData.get('function'),
          lastUpdated: new Date().toISOString().split('T')[0]
        };
        
           // Firebaseã«ä¿å­˜
           saveToFirebase();
           
           // ãƒ†ãƒ¼ãƒ–ãƒ«è¡Œã‚’å‹•çš„ã«æ›´æ–°
           updateTableRow(pageId, pageData[pageId]);
           
           // çµ±è¨ˆæƒ…å ±ã‚’æ›´æ–°
           updateStats();
        
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        closeEditModal();
      });

      // æ–°è¦é …ç›®è¿½åŠ ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡å‡¦ç†
      document.getElementById('addNewForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const formData = new FormData(this);
        
        // æ–°ã—ã„ãƒšãƒ¼ã‚¸IDã‚’ç”Ÿæˆ
        const newPageId = 'new_' + Date.now();
        
        // æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆ
        const newPageData = {
          name: formData.get('pageName'),
          url: formData.get('url'),
          category: formData.get('category'),
          status: formData.get('status'),
          function: formData.get('function'),
          lastUpdated: new Date().toISOString().split('T')[0]
        };
        
        // ãƒ‡ãƒ¼ã‚¿ã«è¿½åŠ 
        pageData[newPageId] = newPageData;
        
         // Firebaseã«ä¿å­˜
         saveToFirebase();
        
        // ãƒ†ãƒ¼ãƒ–ãƒ«ã«æ–°ã—ã„è¡Œã‚’å‹•çš„ã«è¿½åŠ 
        addNewRowToTable(newPageId, newPageData);
        
        // çµ±è¨ˆæƒ…å ±ã‚’æ›´æ–°
        updateStats();
        
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        closeAddNewModal();
      });

      // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ãƒ‡ãƒ¼ã‚¿ã‚’å¾©å…ƒ
       window.addEventListener('load', async function() {
         await loadFromFirebase();
        
        // å®Ÿéš›ã«å­˜åœ¨ã™ã‚‹HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’åŸºã«ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ§‹ç¯‰
        buildTableFromExistingFiles();
        
        // æ–°è¦è¿½åŠ ã•ã‚ŒãŸé …ç›®ã‚’å¾©å…ƒ
        Object.keys(pageData).forEach(pageId => {
          if (pageId.startsWith('new_')) {
            const data = pageData[pageId];
            // ãƒ†ãƒ¼ãƒ–ãƒ«ã«æ—¢ã«å­˜åœ¨ã™ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
            const existingRow = document.querySelector(`[data-page="${pageId}"]`);
            if (!existingRow) {
              addNewRowToTable(pageId, data);
            }
          } else {
            // æ—¢å­˜ã®ãƒ‡ãƒ¼ã‚¿ã‚’å¾©å…ƒ
            const data = pageData[pageId];
            const element = document.querySelector(`[data-page="${pageId}"]`);
            if (element && data.lastUpdated) {
              element.textContent = data.lastUpdated;
            }
          }
        });
        
        // çµ±è¨ˆæƒ…å ±ã‚’æ›´æ–°
        updateStats();
        
        // åˆæœŸçµ±è¨ˆæƒ…å ±ã‚’è¨­å®š
        initializeStats();
      });

      // åˆæœŸçµ±è¨ˆæƒ…å ±ã‚’è¨­å®š
      function initializeStats() {
        // æ—¢å­˜ã®ãƒšãƒ¼ã‚¸ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰çµ±è¨ˆã‚’è¨ˆç®—
        const existingPages = document.querySelectorAll('table tbody tr:not(.category-header)');
        const totalExistingPages = existingPages.length;
        
        // æ—¢å­˜ã®å®Œå…¨å®Ÿè£…ãƒšãƒ¼ã‚¸æ•°ã‚’è¨ˆç®—
        const completeExistingPages = Array.from(existingPages).filter(row => {
          const statusSpan = row.querySelector('.status-complete');
          return statusSpan && statusSpan.textContent.includes('âœ… å®Œå…¨å®Ÿè£…');
        }).length;
        
        // çµ±è¨ˆæƒ…å ±ã‚’æ›´æ–°
        const statNumbers = document.querySelectorAll('.stat-number');
        if (statNumbers.length > 0) {
          statNumbers[0].textContent = totalExistingPages;
        }
           
           // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã‚’æ›´æ–°
          const completionRate = totalExistingPages > 0 ? Math.round((completeExistingPages / totalExistingPages) * 100) : 0;
           updateProgressBar(completeExistingPages, totalExistingPages, completionRate);
         }

         // Firebaseã«ä¿å­˜ã™ã‚‹é–¢æ•°
         async function saveToFirebase() {
           try {
             if (window.firebaseSet && window.firebaseRef && window.firebaseDatabase) {
               await window.firebaseSet(window.firebaseRef(window.firebaseDatabase, 'pageData'), pageData);
               console.log('Firebaseã«ä¿å­˜ã—ã¾ã—ãŸ');
             } else {
               // FirebaseãŒåˆ©ç”¨ã§ããªã„å ´åˆã¯ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜
               localStorage.setItem('pageData', JSON.stringify(pageData));
               console.log('ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ã—ã¾ã—ãŸ');
             }
           } catch (error) {
             console.error('ä¿å­˜ã‚¨ãƒ©ãƒ¼:', error);
             // ã‚¨ãƒ©ãƒ¼ã®å ´åˆã¯ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜
             localStorage.setItem('pageData', JSON.stringify(pageData));
           }
         }

         // Firebaseã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€é–¢æ•°
         async function loadFromFirebase() {
           try {
             if (window.firebaseGet && window.firebaseRef && window.firebaseDatabase) {
               const snapshot = await window.firebaseGet(window.firebaseRef(window.firebaseDatabase, 'pageData'));
               if (snapshot.exists()) {
                 pageData = snapshot.val();
                 console.log('Firebaseã‹ã‚‰èª­ã¿è¾¼ã¿ã¾ã—ãŸ');
                 return true;
               }
             }
           } catch (error) {
             console.error('èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error);
           }
           
           // FirebaseãŒåˆ©ç”¨ã§ããªã„å ´åˆã¯ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰èª­ã¿è¾¼ã¿
           const savedData = localStorage.getItem('pageData');
           if (savedData) {
             pageData = JSON.parse(savedData);
             console.log('ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰èª­ã¿è¾¼ã¿ã¾ã—ãŸ');
             return true;
           }
           return false;
      }

      // ãƒ¢ãƒ¼ãƒ€ãƒ«å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
      document.getElementById('editModal').addEventListener('click', function(e) {
        if (e.target === this) {
          closeEditModal();
        }
      });

      // æ–°è¦è¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ«å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
      document.getElementById('addNewModal').addEventListener('click', function(e) {
        if (e.target === this) {
          closeAddNewModal();
        }
      });

      // å‰Šé™¤ãƒ¢ãƒ¼ãƒ€ãƒ«å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
      document.getElementById('deleteModal').addEventListener('click', function(e) {
        if (e.target === this) {
          closeDeleteModal();
        }
      });
    </script>
  </body>
</html>
